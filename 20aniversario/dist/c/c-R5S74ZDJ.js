import{a as d,c as p}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-KQ44SPOC.js";import{b as s,e as f}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-CHZ44M2H.js";import{b as n,d as g}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-VZS75WCV.js";import{a,c as m}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-UPFOSVDA.js";import{b as o,c as l}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OAY73AJW.js";import{a as u}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";function c(){return new Promise(t=>{if(a())return null;let e=document.createElement("iframe");e.style.width=s(0),e.style.height=s(0),e.style.position="absolute",e.style.left=s(-9999),e.addEventListener("load",()=>{e.contentWindow?.postMessage("GetLoggedUser","*")}),e.setAttribute("src",`${o.readymag_auth_host}/get_user_cookies.${Date.now()}`),document.body.appendChild(e),window.addEventListener("message",r=>{if(r.origin===o.readymag_auth_host){if(typeof r.data!="string")return e.remove(),t(null);try{let i=JSON.parse(r.data);if(i.event!=="user")return e.remove(),t(null);e.remove(),t(i.message)}catch{e.remove(),t(null)}}})})}function b(){let[t,e]=L();return n(()=>{a()||t.isUserLoaded||t.isLoading||(e(r=>({...r,isLoading:!0})),c().then(r=>e({user:r,isUserLoaded:!0,isLoading:!1})).catch(()=>e({user:null,isUserLoaded:!0,isLoading:!1})))},[t.isLoading,t.isUserLoaded,e]),t}var L,U=u(()=>{"use strict";g();l();f();m();p();({useStore:L}=d("Logged in user",{isLoading:!1,isUserLoaded:!1,user:null}))});export{c as a,b,U as c};
