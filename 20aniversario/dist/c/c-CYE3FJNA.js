import{c as _,d as B}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-G2CN6UBK.js";import{n as E,o as O}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-PJF6UIFY.js";import{p as r,q as K}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-QQSGI2X4.js";import{a as t,c as G}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-MKQKZXV6.js";import{a as A}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-L5GBYYT7.js";import{a as L,d as I}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";var f,c,h,a,U,P,R=L(()=>{"use strict";f=I(A());B();O();K();G();c=["hidden","z"],h="_",a=c.map(e=>h+e),U={GLOBAL_UNIQUE_KEYS:c,GLOBAL_UNIQUE_KEY_PREFIX:h,GLOBAL_PRIVATE_KEYS:a,FADE_DURATION:200,getUniqueValue:function(e,n,i){let s=n[this.GLOBAL_UNIQUE_KEY_PREFIX+e]||[],l=f.default.findWhere(s,{pid:i});return l=l||f.default.findWhere(s,{pid:"default"})||{},l.value===void 0?n[e]:l.value},resetGlobalData:function(e,n){let i={},s=this;return t("widget.viewportProxy")?e.setInViewports(()=>Object.fromEntries(a.map(l=>[l,[]]))):f.default.each(r.viewport_listall,function(l){f.default.each(s.GLOBAL_UNIQUE_KEYS,function(u){l==="viewport_"+n?e.set(s.GLOBAL_UNIQUE_KEY_PREFIX+u,[]):f.default.isEmpty(e[l])||(e[l][s.GLOBAL_UNIQUE_KEY_PREFIX+u]=[])})}),i},isGlobalKey:function(e){return this.GLOBAL_UNIQUE_KEYS.indexOf(e)!==-1},getGlobalPrefixedKey:function(e){return this.isGlobalKey(e)?this.GLOBAL_UNIQUE_KEY_PREFIX+e:null},fillUniqueAttributeSets:function(e,n,i){let s={};return n.is_global?((0,f.default)(this.GLOBAL_UNIQUE_KEYS).each(function(l){if(!f.default.has(e,l)||e[l]===void 0)return;let u=n[this.GLOBAL_UNIQUE_KEY_PREFIX+l]||[],o=f.default.findWhere(u,{pid:i}),d=f.default.findWhere(u,{pid:"default"});o?o.value=e[l]:u.push({pid:i,value:e[l]}),d||u.push({pid:"default",value:n[l]===void 0?null:n[l]}),s[this.GLOBAL_UNIQUE_KEY_PREFIX+l]=u}.bind(this)),s):e},ensurePageDefRecord:function(e){let n={};return(0,f.default)(this.GLOBAL_UNIQUE_KEYS).each(function(i){let s=e[this.GLOBAL_UNIQUE_KEY_PREFIX+i]||[];f.default.findWhere(s,{pid:"default"})||s.push({pid:"default",value:e[i]===void 0?null:e[i]}),n[this.GLOBAL_UNIQUE_KEY_PREFIX+i]=s}.bind(this)),n},fillUniqueValues:function(e,n){if(t("viewer.betterGlobalValues")){for(let i of this.GLOBAL_UNIQUE_KEYS)if(e[`${this.GLOBAL_UNIQUE_KEY_PREFIX}${i}`]){let s=this.getUniqueValue(i,e,n);typeof s<"u"&&(e[i]=s)}}else f.default.each(e,function(i,s){if(!f.default.contains(this.GLOBAL_UNIQUE_KEYS,s))return;let l=this.getUniqueValue(s,e,n);e[s]=l===void 0?i:l},this)},isHidden:function(e,n,i){return this.getUniqueValue("hidden",e,n)||!i&&_.hasExpired(e)},show:function(e,n){n=!!n,e.$el.toggleClass("no-transition",n),e.$el.addClass("above-all-fade"),(!e.$el.hasClass("fade-in")||n)&&(e.cancelHide&&e.cancelHide(),e.show(),f.default.delay(function(){e.$el.addClass("fade-in")},50))},hide:function(e,n){return n=!!n,e.$el.addClass("above-all-fade"),new window.Promise(function(i){e.$el.hasClass("fade-in")||n?(e.$el.toggleClass("no-transition",n),e.$el.removeClass("fade-in"),n?(e.hide(),i()):e.cancelHide=E.waitForTransitionEnd(e.$el,U.FADE_DURATION,"opacity",function(){e.hide(),i()})):i()})}},P=U});export{P as a,R as b};
