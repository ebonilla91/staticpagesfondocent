import{a as M,b as kt,c as V,d as Lt,e as _,f as Bt,g as q,h as St,i as J,j as At,k as Q,l as It}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-DVRRDKCF.js";import{a as P}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-SSXOIMVL.js";import{e as N,p as K,s as yt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-53LSWZTP.js";import{a as G}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-TYS4YGQE.js";import{a as U}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-HAEKI3RJ.js";import{b as vt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-HDRT62RD.js";import{F,G as i,H as h,J as x}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BPJUKUAP.js";import{a as bt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-WSIFDYHJ.js";import{b as xt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BWC6YUQZ.js";import{a as D,d as u}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";function X({isVisible:e,isDarkBackground:o,type:r,onClick:m}){let f=(0,k.useSpring)({opacity:e?1:0,left:r==="left"?e?24:-40:"auto",right:r==="right"?e?24:-40:"auto"}),b=`lightbox-arrow-${r}`;return h(Ct,{"data-testid":b,position:"absolute",top:"50%",marginTop:"-4rm",zIndex:3100,onClick:m,style:f,variant:"clean",children:[i(Z.default,{id:b,children:r==="left"?"Previous":"Next"}),r==="left"?o?i(M,{}):i(_,{}):o?i(V,{}):i(q,{})]})}function Dt({isVisible:e,isDarkBackground:o,onPrev:r,onNext:m}){return h(F,{children:[i(X,{isVisible:e,isDarkBackground:o,type:"left",onClick:r}),i(X,{isVisible:e,isDarkBackground:o,type:"right",onClick:m})]})}var Y,k,Z,Ct,j,tt=D(()=>{"use strict";Y=u(U());kt();Lt();k=u(P());Bt();St();Z=u(G());x();Ct=(0,k.animated)(Y.default);j=Dt});function it(e){let o=(0,L.useSpring)({opacity:e.isVisible?1:0});return h(Pt,{"data-testid":"lightbox-cross",onClick:e.onClick,position:"absolute",right:"2rm",top:"2rm",zIndex:3100,style:o,variant:"clean",children:[i(et.default,{id:"lightbox-cross",children:"Close"}),e.isDarkBackground?i(J,{}):i(Q,{})]})}var ot,L,et,Pt,rt=D(()=>{"use strict";ot=u(U()),L=u(P());At();It();et=u(G());x();Pt=(0,L.animated)(ot.default)});function Tt({mode:e,isVisible:o,slides:r,onClose:m,index:n,onSlideChange:c,originRect:f}){let[b,nt]=(0,s.useState)("prev"),l=(0,s.useMemo)(()=>r[n],[r,n]),[z,B]=(0,s.useState)(!1),[a,st]=(0,s.useState)(!1),w=(0,s.useMemo)(()=>r.map((t,d)=>t.gallery?d:null).filter(t=>t!==null),[r]),S=r.length>1&&l.gallery,{isImageLoaded:at,preloadImage:lt}=zt(),E=at(l.imgSrc)||z&&a&&lt(l.imgSrc),R=E?"zoom-out":"wait",[A,ct]=(0,s.useState)({height:window.innerHeight,width:window.innerWidth});function H(){ct({height:window.innerHeight,width:window.innerWidth})}let dt=(0,s.useMemo)(()=>{let{r:t,g:d,b:p,a:C}=N(l.color);return`rgba(${t}, ${d}, ${p}, ${C})`},[l.color]),pt=(0,g.useSpring)({opacity:o?1:0}),W=(0,s.useMemo)(()=>{let{top:t=0,left:d=0,...p}=f;return{...p,top:`${t*100/A.height}%`,left:`${d*100/A.width}%`,opacity:0}},[f,A]),gt=(0,g.useTransition)(o,null,{from:W,enter:{top:"50%",left:"50%",height:l.height,width:l.width,opacity:1},leave:S?{opacity:0}:W,onDestroyed:t=>{st(!t),B(!t)}}),ut=(0,g.useTransition)(l,t=>t._id,{immediate:!a,from:{opacity:0,left:b==="next"?"100%":"-100%"},enter:{opacity:1,left:"0%"},leave:{opacity:0,left:b==="next"?"-100%":"100%"},onDestroyed:()=>{z||B(!0)}});function y(t){if(!S||!c)return;B(!1),nt(t);let d=w.indexOf(n),p=t==="next"?d+1:d-1;t==="next"?p<w.length?c(w[p]):c(w[0]):p>=0?c(w[p]):c(w[w.length-1])}function v(){a&&m&&m()}function I(t){switch(t.key){case"Escape":v();break;case"ArrowLeft":y("prev");break;case"ArrowRight":y("next");break;default:break}}(0,s.useEffect)(()=>(window.addEventListener("resize",H),e==="viewer"&&a&&(o?window.addEventListener("keyup",I):window.removeEventListener("keyup",I)),()=>{window.removeEventListener("resize",H),window.removeEventListener("keyup",I)}),[o,l,a]);let $=(0,s.useMemo)(()=>K(l.color),[l]);return h(T.Box,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2999,pointerEvents:a?"all":"none",children:[i(it,{isDarkBackground:!$,isVisible:o&&a,onClick:v}),e==="viewer"&&S&&i(j,{isDarkBackground:!$,isVisible:o&&a,onPrev:()=>y("prev"),onNext:()=>y("next")}),i(g.animated.div,{onClick:v,style:{backgroundColor:dt,position:"absolute",zIndex:0,width:"100%",height:"100%",transition:".3s background-color",cursor:R,...pt}}),ut.map(({item:t,key:d,props:p})=>i(g.animated.div,{onClick:v,style:{position:"absolute",zIndex:10,width:"100%",height:"100%",cursor:R,...p},children:gt.map(({item:C,key:mt,props:{height:ht,width:ft,...wt}})=>{if(!C)return null;let O={position:"absolute",transform:"translate(-50%, -50%)",height:o&&a||!o&&a&&t.gallery?t.height:ht,width:o&&a||!o&&a&&t.gallery?t.width:ft,...wt};return h(T.Box,{children:[E&&i(g.animated.img,{style:{...O,zIndex:20},src:t.imgSrc}),i(g.animated.img,{"data-testid":"lightbox-image",style:{...O,zIndex:10,filter:"blur(0.4px)"},src:t.previewImgSrc})]},mt)})},d))]})}function zt(){let[e,o]=(0,s.useState)({});function r(n){if(e.hasOwnProperty(n))return e[n];let c=new Image;c.onload=()=>{o({...e,[n]:!0})},c.onerror=()=>{let f={...e};delete f[n],o(f)},c.src=n,o({...e,[n]:!1})}function m(n){return e.hasOwnProperty(n)?e[n]:!1}return{isImageLoaded:m,preloadImage:r}}var s,T,g,Xt,Et=D(()=>{"use strict";s=u(bt()),T=u(vt()),g=u(P());xt();yt();tt();rt();x();Xt=Tt});export{Xt as a,Et as b};
