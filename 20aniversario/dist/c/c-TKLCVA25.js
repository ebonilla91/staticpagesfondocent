import{j as r,k as l,l as M}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-QAJ6YHWG.js";import{a,b as y}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OZHM55CV.js";import{a as p,c as z}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-UPFOSVDA.js";import{a as R}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-U4UD4LYQ.js";import{a as v,d as L,f as t}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";var h,E=v(()=>{"use strict";h=class{constructor(){t(this,"listeners",[])}add(e){this.listeners.push(e)}remove(e){let i=this.listeners.indexOf(e);i!==-1&&this.listeners.splice(i,1)}invoke(e){for(let i of this.listeners)i(e)}}});var u,f=v(()=>{"use strict";u=class{constructor(e){t(this,"_previous");t(this,"_current");this._previous=e,this._current=e}get previous(){return this._previous}get current(){return this._current}set current(e){this._previous=this._current,this._current=e}}});var m,o,d,g,D=v(()=>{"use strict";m=L(R());M();y();z();E();f();o={passive:!1},d={isEnabled:!0},g=class{constructor(e){t(this,"listeners",new h);t(this,"isTouch",a.isTouch());t(this,"isSafari",a.isSafari());t(this,"isIOS",a.isIOS());t(this,"isDesktopSafari",!this.isTouch&&this.isSafari);t(this,"container");t(this,"lineHeight",p()?22:parseFloat(window.getComputedStyle(document.body).lineHeight)||22);t(this,"wheelSpeed",.5);t(this,"touchSpeed",1);t(this,"maxDeltaTimeForMomentumScroll",30);t(this,"scrollTop",new u(0));t(this,"scrollHeight",0);t(this,"windowHeight",0);t(this,"isScrolling",!1);t(this,"touchStartY",0);t(this,"touchStartVelocity",0);t(this,"touchStartTime",0);t(this,"lastTouchTimestamp",0);t(this,"inertiaRaf",0);t(this,"resizeObserver");t(this,"skipIosEvent",!0);t(this,"onResize",(0,m.debounce)(()=>{this.updateDimensions(),this.syncScrollPosition(!1)},100));t(this,"clearIsScrollingDebounced",(0,m.debounce)(()=>{this.clearIsScrolling()},40));p()||(this.onWheel=this.onWheel.bind(this),this.onResize=this.onResize.bind(this),this.onScroll=this.onScroll.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.container=e||document.documentElement,this.scrollTop.current=Math.max(this.getMinScroll(),this.getActualElementScroll()),this.setContainerStyles(),this.updateDimensions(),this.updateScrollPosition(!1),this.bindEvents())}bindEvents(){window.addEventListener("DOMContentLoaded",this.onResize),window.addEventListener("load",this.onResize),window.addEventListener("readystatechange",this.onResize),window.addEventListener("visibilitychange",this.onResize),window.addEventListener("resize",this.onResize),window.addEventListener("hashchange",this.onResize),window.addEventListener("popstate",this.onResize),window.addEventListener("pushState",this.onResize),window.addEventListener("replaceState",this.onResize),document.addEventListener("gesturestart",this.disablePinch),document.addEventListener("gesturechange",this.disablePinch),document.addEventListener("gestureend",this.disablePinch),this.bindResizeObserver(),document.addEventListener("scroll",this.onScroll),this.isTouch?(document.addEventListener("touchstart",this.onTouchStart,o),document.addEventListener("touchend",this.onTouchEnd,o),document.addEventListener("touchcancel",this.onTouchEnd,o),document.addEventListener("touchmove",this.onTouchMove,o)):this.isDesktopSafari||document.addEventListener("wheel",this.onWheel,o)}bindResizeObserver(){window.ResizeObserver&&this.container!==document.documentElement&&(this.resizeObserver=new window.ResizeObserver(this.onResize),Array.from(this.container.childNodes).filter(s=>s.nodeType===Node.ELEMENT_NODE).forEach(s=>this.resizeObserver?.observe(s)))}unbindResizeObserver(){this.resizeObserver&&this.resizeObserver.disconnect()}disablePinch(e){e.preventDefault()}unbindEvents(){window.removeEventListener("DOMContentLoaded",this.onResize),window.removeEventListener("load",this.onResize),window.removeEventListener("readystatechange",this.onResize),window.removeEventListener("visibilitychange",this.onResize),window.removeEventListener("resize",this.onResize),window.removeEventListener("hashchange",this.onResize),window.removeEventListener("popstate",this.onResize),window.removeEventListener("pushState",this.onResize),window.removeEventListener("replaceState",this.onResize),this.unbindResizeObserver(),document.removeEventListener("scroll",this.onScroll),this.isTouch?(document.removeEventListener("touchstart",this.onTouchStart,o),document.removeEventListener("touchend",this.onTouchEnd,o),document.removeEventListener("touchcancel",this.onTouchEnd,o),document.removeEventListener("touchmove",this.onTouchMove,o)):this.isDesktopSafari||document.removeEventListener("wheel",this.onWheel,o)}onScroll(){(this.isDesktopSafari||!this.isScrolling)&&this.syncScrollPosition(!0)}syncScrollPosition(e){let i=this.getActualElementScroll();this.scrollTop.current!==i&&(this.scrollTop.current=this.clampScrollPosition(i),this.updateScrollPosition(e))}onWheel(e){if(l(e.target))return;if(!d.isEnabled)return this.clearIsScrolling();e.preventDefault(),this.isScrolling=!0;let i=e.deltaMode===WheelEvent.DOM_DELTA_LINE?this.lineHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE?this.windowHeight:1,s=e.deltaY*i*this.wheelSpeed;s!==0&&(this.scrollTop.current=this.clampScrollPosition(this.scrollTop.current+s),this.scrollTop.current<=0||this.scrollTop.current>=this.scrollHeight-this.windowHeight?this.clearIsScrolling():this.clearIsScrollingDebounced(),this.updateScrollPosition(!1))}canScrollWithTouch(e){return!(!d.isEnabled||e.touches.length>1)}onTouchStart(e){if(!this.canScrollWithTouch(e)||l(e.target))return;if(document.hasFocus()&&r(document.activeElement)){r(e.target)||document.activeElement.blur();return}e.preventDefault(),this.inertiaRaf&&(window.cancelAnimationFrame(this.inertiaRaf),this.inertiaRaf=0),this.isScrolling=!0,this.isIOS&&(this.skipIosEvent=!0);let i=this.getTouchEvent(e);this.touchStartY=i.pageY,this.touchStartVelocity=i.clientY,this.touchStartTime=e.timeStamp,this.lastTouchTimestamp=this.touchStartTime}onTouchMove(e){if(!this.isScrolling||l(e.target))return;if(!this.canScrollWithTouch(e))return this.clearIsScrolling();if(e.preventDefault(),this.isIOS){if(this.skipIosEvent){this.skipIosEvent=!1;return}this.skipIosEvent=!0}let i=this.getTouchEvent(e),s=Math.ceil((i.pageY-this.touchStartY)*this.touchSpeed);if(s===0)return;let n=Math.ceil(this.scrollTop.current-s);this.scrollTop.current=this.clampScrollPosition(n),this.updateScrollPosition(!1),this.lastTouchTimestamp=e.timeStamp}onTouchEnd(e){if(!this.canScrollWithTouch(e)||!this.isScrolling||l(e.target))return;let s=this.getTouchEvent(e).clientY,n=e.timeStamp,c=n-this.touchStartTime,T=s-this.touchStartVelocity,w=T/c,b=n-this.lastTouchTimestamp;Math.abs(T)<=3?(this.clearIsScrolling(),this.simulateClick(e)):(this.callScrollCallback(),b<this.maxDeltaTimeForMomentumScroll&&this.animateScroll(w))}simulateClick(e){let i=e.target;if(i)if(r(i))i.focus();else if(document.hasFocus()&&r(document.activeElement)&&document.activeElement.blur(),i instanceof HTMLElement&&i.click)i.click();else{let s=this.getTouchEvent(e),n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});i.dispatchEvent(n)}}animateScroll(e){let n=e*40;this.inertiaRaf&&(window.cancelAnimationFrame(this.inertiaRaf),this.inertiaRaf=0);let c=()=>{if(n*=.95,this.scrollTop.current=this.clampScrollPosition(this.scrollTop.current-n),this.updateScrollPosition(!1),Math.abs(n)<.01){this.inertiaRaf&&(window.cancelAnimationFrame(this.inertiaRaf),this.inertiaRaf=0),this.clearIsScrolling();return}this.inertiaRaf=window.requestAnimationFrame(c)};this.inertiaRaf=window.requestAnimationFrame(c)}getTouchEvent(e){return e.changedTouches?.[0]||e}getCurrentScrollData(){let e=this.scrollTop.current>=this.scrollTop.previous;return{scrollTop:this.scrollTop.current,scrollHeight:this.scrollHeight,isScrolling:this.isScrolling,isScrollingDown:e,isScrollingUp:!e}}callScrollCallback(){this.listeners.invoke(this.getCurrentScrollData())}addListener(e){this.listeners.add(e),e(this.getCurrentScrollData())}removeListener(e){this.listeners.remove(e)}clampScrollPosition(e){return Math.max(this.getMinScroll(),Math.min(e,this.scrollHeight-this.container.clientHeight))}updateScrollPosition(e){e||this.container.scrollTo?.(0,this.scrollTop.current),this.callScrollCallback()}getMinScroll(){return this.isTouch?1:0}getActualElementScroll(){return this.container.scrollTop}updateDimensions(){this.scrollHeight=Math.max(0,this.container.scrollHeight),this.windowHeight=window.innerHeight}clearIsScrolling(){this.isScrolling=!1,this.callScrollCallback()}setContainerStyles(){this.container.style.scrollBehavior="auto",this.container.style.overflowScrolling="touch",this.container.style.WebkitOverflowScrolling="touch",this.container.style.overscrollBehaviorY="none"}destroy(){this.unbindEvents()}static toggleScroll(e){d.isEnabled=e}static isEnabled(){return d.isEnabled}}});export{g as a,D as b};
