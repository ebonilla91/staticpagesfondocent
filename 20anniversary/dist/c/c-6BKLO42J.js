import{n as b,o as C}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-PJF6UIFY.js";import{a as P}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BHCSVH3M.js";import{a as I,d as a}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";var p,y,j,Y=I(()=>{"use strict";p=a(P());C();y={setVideoPosition:function(e){if(!e.aspect_poster||!e.$media||!e.$media.length)return;let o=e.$container.css("width"),i=e.$container.css("height");if(/px/.test(o+i))o=parseInt(o),i=parseInt(i);else{if(!e.mag)return;let u=e.mag.getContainerSizeCached();o=u.width,i=u.height}let t=e.aspect_poster,l=e.aspect_real||t,c=e.controls_remove?5:0,d=o+c*2,s=i+c*2,n=d,r=s;if(t){let u,h;d/s>l?(u=d,h=u/l):(h=s,u=h*l),t<l?(n=u,r=n/t):(r=h,n=r*t)}if(e.provider.toLowerCase()=="vimeo"&&e.controls_remove){var m=(r-s)/2,U=(n-d)/2,f=50,$=46,v=f-m,w=$-U;if(v>0||w>0){let u=(r+v*2)/r,h=(n+w*2)/n,_=Math.max(u,h);n*=_,r*=_}}if(e.provider.toLowerCase()=="youtube"&&e.controls_remove){var m=(r-s)/2,f=103,g=f-m;g>0&&(r+=g*2,n=r*t)}let V=-c-(n-d)/2,x=-c-(r-s)/2;e.$media.css({left:V,top:x,width:n,height:r})},getHighResVideoThumbnail:function(e){if(!e.provider||!e.thumbnail_url)return Promise.resolve(e.thumbnail_url||"");function o(i,t){return i.replace(/(\/)(\w*default)(\.\w+$)/i,"$1"+t+"$3")}switch(e.provider.toLowerCase()){case"vimeo":return Promise.resolve(e.thumbnail_url);case"youtube":return Promise.resolve(typeof e.video_url=="string"&&e.video_url.includes("shorts")?e.thumbnail_url:o(e.thumbnail_url,"maxresdefault"));default:return Promise.resolve(e.thumbnail_url)}},getEmbedData:function(e,o,i){return p.default.ajax({type:"GET",url:/oembed/i.test(e)?e:this.getEmbedUrl(e),dataType:"json",success:function(t){t.url=t.url&&b.toHttps(t.url),t.thumbnail_url=t.thumbnail_url&&b.toHttps(t.thumbnail_url),typeof o=="function"&&o(t)},error:function(t,l,c){l!=="abort"&&typeof i=="function"&&i(t,l,c)},global:!1})},getEmbedUrl:function(e){if(this.isVimeo(e))return"https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e)+"&width=1280";{let o=y.getYoutubeIdFromUrl(e);if(o)return"https://www.youtube.com/oembed?format=json&url="+encodeURIComponent("https://www.youtube.com/watch?v="+o)}return""},getYoutubeIdFromUrl:function(e){let o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|shorts\/|watch\?v=)([^#\&\?]*).*/,i=e.match(o);if(i&&i[2].length===11)return i[2];let t=/.*(youtu.*\&v=)([^#\&\?]*).*/;return i=e.match(t),i&&i[2].length===11?i[2]:null},getVimeoIdFromUrl:function(e){let o=e.match(/(video\/)(\w+)(_\d+x\d+|_\d+)(\.\w+$)/i);return o&&o[2]?o[2]:null},getVideoProvider:function(e){return this.isVimeo(e)?"Vimeo":this.isYoutube(e)?"YouTube":""},isVimeo:function(e){return/vimeo\.com\/.+/.test(e)},isYoutube:function(e){return e&&!!this.getYoutubeIdFromUrl(e)},brokenVimeoThumbnailRegexp:/\/\d+_[\dx]+(\.\w+)?$/},j=y});export{j as a,Y as b};
