import{a as eo}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-DMEV45UX.js";import{a as Qn,c as ii}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-CIGOLRQW.js";import{a as no,b as ci}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-CSGZDKQS.js";import{a as ai}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-POGSWT4J.js";import{b as Vr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-GVRHK2QQ.js";import{$ as Le,Ba as qe,C as Sn,Ca as Dn,D as hn,Da as Ue,Fa as Bn,Ka as _t,L as Ce,M as bn,Ma as Fn,Na as Zr,O as vn,P as xn,Pa as Ke,Q as wn,Qa as Jr,R as lt,S as kn,U as Ct,Ua as Nn,V as Ae,Va as Qr,W as ct,Wa as An,Xa as Wn,Y as G,Ya as ei,Z as Tn,_ as ut,ab as zn,ba as Cn,bb as Hn,c as qr,cb as ti,da as We,db as Vn,ea as ue,eb as qn,f as ln,fa as se,fb as Un,ga as Ln,gb as Kn,ha as _n,hb as ni,ia as En,ja as dt,k as cn,ka as _e,kb as Gn,l as un,lb as Yn,ma as ze,mb as Xn,n as dn,nb as Zn,o as A,oa as pt,ob as oi,p as pn,q as fn,qa as In,qb as Jn,r as st,ra as Lt,sa as jn,sb as ri,ta as $n,tb as I,ua as Kr,ub as mt,xa as He,za as On}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-Z63DEK6E.js";import{m as Jt,o as Qt,s as Wr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-7G52Q5ZO.js";import{c as mn,e as at,h as gn,m as yn,s as Tt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-53LSWZTP.js";import{a as Ve,g as Rn}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-XOCVWU26.js";import{a as to}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-W4Y6MMOM.js";import{a as Et,b as ui}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-4OHUPY2K.js";import{a as li}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-PU4WIN6K.js";import{a as si}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-EXY2AIAF.js";import{a as Pn,c as Ur}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-XZAKTUPJ.js";import{a as tn}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-LV5FH5B7.js";import{a as en,b as Ee}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-HDRT62RD.js";import{d as it}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-LMXYD7AC.js";import{a as ft}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-I4FBAQQB.js";import{a as Xr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-X4WAQTSE.js";import{a as Pt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OWKND2N3.js";import{b as Gr,e as Yr,f as Mn}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-U3EQ6JVM.js";import{a as Ne,b as wt,e as Hr,f as sn}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-4FR22MFU.js";import{F as Te,G as x,H as ie,I as an,J as N,d as nn,e as zr,f as on,u as rn}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BPJUKUAP.js";import{a as q,b as kt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-3ZELX36Q.js";import{n as Zt,o as Ar}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-PJF6UIFY.js";import{a as Nr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-U4UD4LYQ.js";import{q as Fr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-QQSGI2X4.js";import{a as Br}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-42FJTMOJ.js";import{a as re}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-WSIFDYHJ.js";import{b as Xt,c as Dr}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OAY73AJW.js";import{a as H,b as me,d as $,e as rt}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";var gt=me(ge=>{"use strict";var Ge=Ne();Object.defineProperty(ge,"__esModule",{value:!0});ge.pointerEvents=ge.default=ge.StyledFrameContext=void 0;var di=Ge(wt()),oo=Ge(ft()),pi=Ge(en()),fi=Ge(tn()),je=re(),ro=Pt(),mi=(sn(),rt(Hr)),gi=Ge((on(),rt(zr))),yi=Gr(),lo=Ee(),Si=it(),Ie=(N(),rt(an)),hi=["children","contentDidMount"],io;function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?so(Object(n),!0).forEach(function(o){(0,di.default)(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var bi=function(t){return t.pointerEvents?"pointer-events: ".concat(t.pointerEvents,";"):""};ge.pointerEvents=bi;var vi=lo.Box.withComponent((0,Si.styled)("iframe")(io||(io=(0,fi.default)([""]))),{target:"e15cplz40"}),co=(0,je.createContext)({});ge.StyledFrameContext=co;var xi=(0,je.forwardRef)(function(e,t){var n=e.children,o=e.contentDidMount,i=(0,pi.default)(e,hi),s=(0,je.useState)(),a=(0,oo.default)(s,2),l=a[0],g=a[1],f=(0,je.useState)(null),p=(0,oo.default)(f,2),u=p[0],c=p[1],y=function(){if(u){var h=u.contentDocument,S=u.contentWindow;if(h&&S){var k=h.querySelector("html");g({document:h,window:S,root:k}),o&&o()}}},d=(0,je.useMemo)(function(){return l&&l.root?{body:l.root.querySelector("body"),head:l.root.querySelector("head")}:{}},[l&&l.root]),r=d.body,m=d.head,b=(0,je.useMemo)(function(){return(0,gi.default)({key:"frame-theme",container:l?.document.head})},[l&&l.document]);return(0,Ie.jsx)(vi,ao(ao({ref:(0,yi.mergeRefs)(t,c),onLoad:y,frameBorder:"0",referrerPolicy:"origin",height:"100%",width:"100%",overflow:"hidden",border:"none",display:"block",srcDoc:"<!DOCTYPE html><html><head></head><body></body></html>"},i),{},{children:l&&l.root?(0,Ie.jsxs)(Ie.Fragment,{children:[i.head&&m&&(0,ro.createPortal)(i.head,m),r&&(0,ro.createPortal)((0,Ie.jsx)(co.Provider,{value:l,children:(0,Ie.jsx)(mi.CacheProvider,{value:b,children:(0,Ie.jsx)(lo.Box,{width:"100%",height:"100%",children:n})})}),r)]}):null}))}),wi=xi;ge.default=wi});var fo=me(It=>{"use strict";var ki=Ne();Object.defineProperty(It,"__esModule",{value:!0});It.default=Ci;var Pi=ki(wt());function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uo(Object(n),!0).forEach(function(o){(0,Pi.default)(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Ti(e,t){return po(po({},e),t)}function Ci(e,t,n){var o=t.map(function(i){var s=Ti(n,i.options);return e.addEventListener(i.eventName,i.fn,s),function(){e.removeEventListener(i.eventName,i.fn,s)}});return function(){o.forEach(function(s){s()})}}});var ho=me(jt=>{"use strict";var yo=Ne(),Li=Br();Object.defineProperty(jt,"__esModule",{value:!0});jt.useScrubbing=Mi;var _i=yo(ft()),te=Ii(re()),Ei=yo(fo());function So(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(So=function(i){return i?n:t})(e)}function Ii(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Li(e)!=="object"&&typeof e!="function")return{default:e};var n=So(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}var le;(function(e){e.IDLE="IDLE",e.PENDING="PENDING",e.SCRUBBING="SCRUBBING"})(le||(le={}));var mo={x:"ew-resize",y:"ns-resize"},go=5;function ji(e,t){return Math.abs(t.x-e.x)>=go||Math.abs(t.y-e.y)>=go}function $i(e){var t=e.getPhase,n=e.setPhase,o=e.getActions,i=e.completed;return[{eventName:"mousemove",fn:function(a){var l=a,g=l.clientX,f=l.clientY,p={x:g,y:f},u=t(),c=o();if(u.type===le.SCRUBBING){a.preventDefault(),c?.move(p,a);return}var y=u.point;ji(y,p)&&(a.preventDefault(),n({type:le.SCRUBBING,point:p}),c?.start())}},{eventName:"mouseup",fn:function(a){var l=t(),g=o();if(l.type!==le.SCRUBBING){i();return}a.preventDefault(),i(),g?.end()}}]}function Mi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.disabled,n=t===void 0?!1:t,o=e.direction,i=e.labelRef,s=e.onScrubbing,a=e.onScrubbingStart,l=e.onScrubbingEnd,g=e.onInitializeLabel,f=e.onTerminateLabel,p=(0,te.useState)({type:le.IDLE,point:{x:0,y:0}}),u=(0,_i.default)(p,2),c=u[0],y=u[1],d=te.default.useRef(c),r=te.default.useRef(),m=(0,te.useRef)();(0,te.useEffect)(function(){d.current=c},[c]);var b=(0,te.useMemo)(function(){return{move:function(k,E){if(s){var T=o==="y"?k.y-d.current.point.y:k.x-d.current.point.x;s({offset:o==="x"?-T:T,movementX:E.movementX,movementY:E.movementY})}},start:function(){return a?.()},end:function(){return l?.()}}},[s,a,l]);(0,te.useEffect)(function(){r.current=b},[b]);var v=(0,te.useCallback)(function(){var S,k=d.current;k.type!==le.IDLE&&(y({type:le.IDLE,point:{x:0,y:0}}),(S=m.current)===null||S===void 0||S.call(m))},[]),h=(0,te.useCallback)(function(S){if(!(S.ctrlKey||S.metaKey||S.shiftKey||S.altKey)){var k={x:S.clientX,y:S.clientY};y({type:le.PENDING,point:k});var E=$i({completed:v,getPhase:function(){return d.current},setPhase:y,getActions:function(){return r.current}});m.current=(0,Ei.default)(window,E,{capture:!0,passive:!1})}},[v]);return(0,te.useEffect)(function(){if(!n)return i!=null&&i.current&&o&&(i.current.style.setProperty("cursor",mo[o]),i.current.style.setProperty("user-select","none"),i.current.addEventListener("mousedown",h),g&&g()),function(){i!=null&&i.current&&(i.current.style.removeProperty("cursor"),i.current.style.removeProperty("user-select"),i.current.removeEventListener("mousedown",h),f&&f())}},[h,n,o]),(0,te.useLayoutEffect)(function(){return function(){var k;(k=m.current)===null||k===void 0||k.call(m)}},[]),(0,te.useMemo)(function(){return{scrubbing:c.type===le.SCRUBBING,props:{style:{cursor:n||!o?"initial":mo[o]},onMouseDown:n?void 0:h}}},[n,o,h,c])}});var xo=me(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.clearInputValue=Wi;Y.countDecimals=void 0;Y.isNativeSymbols=Ni;Y.isValidNumber=Fi;Y.lessThenMin=Oi;Y.minmax=bo;Y.parseInputValue=zi;Y.replaceInputValue=Ai;Y.stepValue=Di;Y.transform=Ri;Y.validateInputText=Bi;function bo(e,t,n){return e<t?t:e>n?n:e}function Oi(e,t){return t>=0&&e>=0&&e<t}var vo=function(t){return t%1?t.toString().split(".")[1].length:0};Y.countDecimals=vo;function Ri(e,t,n,o){return Number(bo(e,t,n).toFixed(o))}function Di(e,t,n){return e==="+"?t+n:t-n}function Bi(e,t,n,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=[e>n,vo(e)>o];return i&&s.push(e<t),s.every(function(a){return!a})}function Fi(e){return e=Number(e),Number.isFinite(e)&&!Number.isNaN(e)}function Ni(e){return e===""||e.length===1&&e[0]==="-"?!0:!!e.endsWith(".")}function Ai(e){return e.replace(",",".")}function Wi(e){var t=e.trim();function n(a,l){return a===l}for(var o=0;o<t.length;o++){var i=t[o];if(i==="."||i===","||i===""||i==="-"){var s=t[o+1];(n(i,s)||i==="-"&&o>0)&&(t=t.slice(0,o)+t.slice(o+1),o--)}}return t}function zi(e){return e===""||(e=e.trim(),e[0]==="."&&(e="0"+e)),e}});var ko=me($t=>{"use strict";var Hi=Ne();Object.defineProperty($t,"__esModule",{value:!0});$t.useInputAutoWidth=Ki;var Vi=Hi(ft()),wo=re(),qi=Mn(),Ui=function(t,n){if(typeof document<"u"&&t){var o=typeof n=="number"?n.toString():n,i=document.createElement("span");document.body.appendChild(i);var s=getComputedStyle(t),a=s.getPropertyValue("font-size");a&&(i.style.fontSize=a.toString()),i.style.font=qi.theme.fonts.main,i.style.position="absolute",i.style.left="-9999px",i.style.margin="0",i.style.width="auto",i.style.whiteSpace="pre",i.innerHTML=o;var l=Math.ceil(i.clientWidth);return l=Math.ceil(l/2)*2+2,i.remove(),l+"px"}return""};function Ki(e){var t=e.ref,n=e.value,o=e.disabled,i=o===void 0?!1:o,s=(0,wo.useState)(""),a=(0,Vi.default)(s,2),l=a[0],g=a[1];return(0,wo.useEffect)(function(){t.current&&!i&&g(Ui(t.current,n))},[n,i]),[i?"":l]}});var _o=me(Se=>{"use strict";var Me=Ne();Object.defineProperty(Se,"__esModule",{value:!0});Se.NumericInput=Se.MIXED_LABEL=Se.DISPLAY_NAME=void 0;var Gi=Me(wt()),Mt=Me(ft()),Yi=Me(en()),Xi=Me(tn()),ye=re(),Zi=it(),Ji=Mn(),Qi=Yr(),es=Me(si()),ts=ai(),ns=Me(li()),os=ho(),X=xo(),rs=ko(),yt=(N(),rt(an)),is=["value","isMixedValue","step","shiftStep","direction","moveSpeed","autoWidth","textStyle","min","max","disableArrowInput","text","disabled","disableScrubbing","labelRef","floating","onChange","onScrubbing","onScrubbingStart","onScrubbingEnd"],Po;function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?To(Object(n),!0).forEach(function(o){(0,Gi.default)(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Ot="Mixed";Se.MIXED_LABEL=Ot;function Ye(e,t){return function(n){t&&t(n),e&&e(n)}}var ss=(0,Zi.styled)(es.default,{excludeProps:["contextDetails"]})(Po||(Po=(0,Xi.default)([`
  margin: 0;
  padding: 0;
  appearance: textfield;
  border-bottom: none !important;
  font-family: `,`;

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    appearance: none;
  }
`])),Ji.theme.fonts.main),Co="NumericInput";Se.DISPLAY_NAME=Co;var Lo=(0,ye.forwardRef)(function(e,t){var n=e.value,o=e.isMixedValue,i=o===void 0?!1:o,s=e.step,a=s===void 0?1:s,l=e.shiftStep,g=l===void 0?10:l,f=e.direction,p=f===void 0?"y":f,u=e.moveSpeed,c=u===void 0?3:u,y=e.autoWidth,d=y===void 0?!1:y,r=e.textStyle,m=r===void 0?"subheading":r,b=e.min,v=b===void 0?Number.NEGATIVE_INFINITY:b,h=e.max,S=h===void 0?Number.POSITIVE_INFINITY:h,k=e.disableArrowInput,E=k===void 0?!1:k,T=e.text,w=e.disabled,_=e.disableScrubbing,L=_===void 0?!1:_,O=e.labelRef,R=e.floating,z=e.onChange,J=e.onScrubbing,ne=e.onScrubbingStart,Q=e.onScrubbingEnd,ae=(0,Yi.default)(e,is),pe=(0,ye.useState)(String(n)),oe=(0,Mt.default)(pe,2),ce=oe[0],fe=oe[1],De=(0,ye.useState)(!1),Be=(0,Mt.default)(De,2),Fe=Be[0],et=Be[1],we=(0,ye.useRef)(0),M=(0,ye.useRef)(null),K=(0,Qi.useForkRef)(t,M),V=(0,rs.useInputAutoWidth)({ref:M,value:i?Ot:ce,disabled:!d}),tt=(0,Mt.default)(V,1),Kt=tt[0],Gt=(0,os.useScrubbing)({disabled:L||i||w,direction:p,labelRef:O,onScrubbing:Or,onScrubbingStart:$r,onScrubbingEnd:Mr}),Yt=Gt.scrubbing,nt=Gt.props;(0,ye.useEffect)(function(){fe(String(n))},[n]);var ot=(0,ye.useMemo)(function(){return typeof R=="boolean"?R?1:0:typeof R=="number"?R:a!==void 0?(0,X.countDecimals)(a):0},[a,R]);function Tr(j){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,B=Number(j),W=(0,X.lessThenMin)(B,v)&&!D;return(0,X.validateInputText)(B,v,S,ot,D||!W)||(B=(0,X.transform)(B,v,S,ot)),{isValid:(0,X.isValidNumber)(B)&&!W,result:B}}function ke(j,D,B){var W=Tr(j,B?.fullValidate),ve=W.isValid,Pe=W.result;if(fe(Pe.toString()),z&&ve){var Rr=Pe!==n;Rr&&z({value:Pe,oldValue:n},D)}}function Cr(j){if(!w){var D=(0,X.replaceInputValue)(j.target.value),B=(0,X.clearInputValue)(D),W=(0,X.parseInputValue)(B),ve=(0,X.isNativeSymbols)(B),Pe=(0,X.isValidNumber)(W);!ve&&Pe?ke(W,j):(ve||Pe)&&fe(W)}}function Lr(){et(!0)}function _r(j){if(et(!1),!i){var D=(0,X.transform)(n,v,S,ot);ke(D,j,{fullValidate:!0})}}function Er(j){if(j.code==="ArrowUp"||j.code==="ArrowDown"||j.code==="Enter"){j.preventDefault();var D=j.shiftKey,B=D?g*a:a;j.code==="ArrowUp"?ke((0,X.stepValue)("+",n,B),j,{fullValidate:!0}):j.code==="ArrowDown"&&ke((0,X.stepValue)("-",n,B),j,{fullValidate:!0}),j.code==="Enter"&&M.current&&M.current.blur()}}function Ir(j){var D=j.target;D.selectionStart===D.selectionEnd&&D.select()}function jr(j){var D;j.target.setSelectionRange(0,0);var B=O==null||(D=O.current)===null||D===void 0?void 0:D.contains(M.current);if(!i&&!B){var W;(W=nt.onMouseDown)===null||W===void 0||W.call(nt,j)}}function $r(){ne&&ne(n),we.current=0}function Mr(){if(O&&!i){var j=(0,X.transform)(n,v,S,ot);j!==n&&ke(j,void 0,{fullValidate:!0})}Q&&Q(n),we.current=0}function Or(j){var D=j.offset;if(D){var B=-Math.round(D/c),W=(B-we.current)*a;if(!i){var ve=W+n;ve!==n&&ke(ve,void 0,{fullValidate:!0})}J&&W!==0&&J(W,{mixed:!!i}),we.current=B}}var be=$e($e({value:ce,disabled:w,height:"fit-content",color:"inherit"},ae),{},{type:"text",onChange:Cr,onBlur:Ye(_r,e.onBlur),onFocus:Ye(Lr,e.onFocus),onMouseUp:Ye(Ir,e.onMouseUp),onMouseDown:Ye(jr,e.onMouseDown)});return E||(be.onKeyDown=Ye(Er,e.onKeyDown)),T!==void 0&&!Fe&&(be.value=T),i||(be.style=$e($e({},nt.style),ae?.style)),i&&(be.value=Ot,Fe&&(be.value="")),Kt&&(be.width=Kt),(0,yt.jsxs)(ye.Fragment,{children:[(0,yt.jsx)(ss,$e($e({caretColor:Yt?"transparent":"auto",textStyle:m},be),{},{ref:K})),Yt?(0,yt.jsx)(ts.Portal,{children:(0,yt.jsx)(ns.default,{role:"presentation",backgroundColor:"transparent",zIndex:99999,style:nt.style,userSelect:"none"})}):null]})});Se.NumericInput=Lo;Lo.displayName=Co});var Io=me(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0})});var $o=me(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Object.defineProperty(Oe,"NumericInputProps",{enumerable:!0,get:function(){return jo.NumericInputProps}});Object.defineProperty(Oe,"NumericInputValue",{enumerable:!0,get:function(){return jo.NumericInputValue}});Oe.default=void 0;var as=_o(),jo=Io(),ls=as.NumericInput;Oe.default=ls});function ds({editable:e,children:t,left:n,top:o,right:i,bottom:s,onChange:a,changedPaddings:l={}}){let{isPaddingsEnabled:g,setIsPaddingsEnabled:f}=(0,P.useContext)(ht),p=(0,P.useRef)(null).current,u=(0,P.useCallback)(S=>{p=S,f(!0)},[]),c=(0,P.useCallback)(S=>{(!p||p===S)&&f(!1)},[p]),y=(0,P.useRef)(null),{height:d}=(0,Bt.useResizeEffect)(y),r=(0,P.useMemo)(()=>d<Re,[d]),m=(0,P.useCallback)(S=>a({top:S}),[a]),b=(0,P.useCallback)(S=>a({left:S}),[a]),v=(0,P.useCallback)(S=>a({right:S}),[a]),h=(0,P.useCallback)(S=>a({bottom:S}),[a]);return ie(Z.Box,{position:"relative",style:{paddingTop:o,paddingLeft:n,paddingRight:i,paddingBottom:s},children:[e&&x(Te,{children:ie(Z.Box,{contentEditable:!1,display:"inline",opacity:e?1:0,visibility:e?"visible":"hidden",userSelect:"none",children:[x(St,{isSmall:r,isChanged:l?.top,from:"top",value:o,marginLeft:n,marginRight:i,onChange:m,onStart:u,onStop:c}),x(St,{isSmall:r,isChanged:l?.left,from:"left",value:n,marginTop:o,marginBottom:s,onChange:b,onStart:u,onStop:c}),x(St,{isSmall:r,isChanged:l?.right,from:"right",value:i,marginTop:o,marginBottom:s,onChange:v,onStart:u,onStop:c}),x(St,{isSmall:r,isChanged:l?.bottom,from:"bottom",value:s,marginLeft:n,marginRight:i,onChange:h,onStart:u,onStop:c})]})}),x(Z.Box,{ref:y,className:"editor-block-wrapper",userSelect:g?"none":void 0,children:t})]})}var P,Oo,Z,Ro,Bt,Do,cs,ht,Re,Rt,us,St,Bo,Ft=H(()=>{"use strict";P=$(re()),Oo=$(Pt());sn();on();Mo();Z=$(Ee()),Ro=$(gt()),Bt=$(eo()),Do=$($o());N();cs=nn({key:"padding-frame-theme",container:typeof document<"u"?document.head:void 0}),ht=(0,P.createContext)({}),Re=43,Rt=2,us=(0,P.memo)(({isActive:e,isSmall:t,from:n,value:o,position:i,onChange:s,disabled:a})=>{let l=window.RM.constructorRouter.zoom.getZoom(),g=n==="top"||n==="bottom",f=t&&!g,p=(0,P.useRef)(null),{width:u,height:c}=(0,Bt.useResizeEffect)(p),y=(0,P.useMemo)(()=>(g?u:c)*l,[g,u,c,l]),d=p&&p.current?p.current.getBoundingClientRect():{x:0,y:0},r=(0,P.useMemo)(()=>f?10:n==="top"?"22px 22px 0 0":n==="right"?"0 22px 22px 0":n==="left"?"22px 0 0 22px":"0 0 22px 22px",[f,n]),m=(0,P.useMemo)(()=>{let T=y-Re,w=i*l-Re/2;return Math.max(0,w<=T?w:T)},[i,y,l]),{height:b,width:v}=(0,P.useMemo)(()=>({height:f?20:Re,width:f?38:g?Re:47}),[f,Re,g]),{ref:h}=(0,P.useContext)(Dt),S=h&&h.current?h.current.getBoundingClientRect():{x:0,y:0},k=(0,P.useMemo)(()=>document.getElementById("paddings-input-portal"),[]),E=x(Z.Box,{display:"flex",position:"relative",justifyContent:f?"flex-start":"flex-end",flexDirection:g?"row":"column",style:{position:"absolute",...g?{left:m+S.x+d.x*l,top:S.y+d.y*l-(n==="top"?b:0)}:{top:m+S.y+d.y*l,left:S.x+d.x*l-(n==="left"?v:0)}},children:x(Z.Box,{display:"flex",backgroundColor:"blue",width:v,height:b,borderRadius:r,alignItems:"center",justifyContent:"center",zoom:"var(--workspace-inverse-zoom)",transform:"scale(var(--workspace-zoom))",transformOrigin:"left top",children:x(Do.default,{min:0,value:o,color:"white",fontSize:14,fontWeight:600,placeholder:"0",textAlign:"center",disabled:a,onChange:({value:T})=>s(T)})})});return x(rn,{value:cs,children:ie(Te,{children:[x(Z.Box,{ref:p,width:"100%",height:"100%"}),e&&k?Oo.default.createPortal(E,k):null]})})}),St=(0,P.memo)(({from:e,isChanged:t,onChange:n,value:o=0,isSmall:i,marginBottom:s=0,marginLeft:a=0,marginRight:l=0,marginTop:g=0,onStart:f,onStop:p})=>{let u=(0,P.useContext)(Ro.StyledFrameContext),c=u&&u.window,y=(M,K)=>{let V=K;c&&c.addEventListener(M,V),window.addEventListener(M,V)},d=(M,K)=>{let V=K;c&&c.removeEventListener&&c.removeEventListener(M,V),window.removeEventListener(M,V)},r=e==="top"||e==="bottom",m=e==="bottom",[b,v]=(0,P.useState)(!1),[h,S]=(0,P.useState)(!1),[k,E]=(0,P.useState)(!1),[T,w]=(0,P.useState)(0),_=(0,P.useRef)(null),[L,O]=(0,P.useState)(0),[R,z]=(0,P.useState)(0),J=(0,P.useRef)(!1).current,ne=M=>{J=!0;let K=r?M.screenY:M.screenX,V=e==="right"?T-K:K-T;n(Math.max(0,o+V)),z(Math.max(0,(r?M.clientX:M.clientY)-L))},Q=()=>{S(!1),J&&(E(!1),p&&p(e)),J=!1};(0,P.useEffect)(()=>(h?(y("mousemove",ne),y("mouseup",Q)):(d("mousemove",ne),d("mouseup",Q)),()=>{d("mousemove",ne),d("mouseup",Q)}),[h]);let ae=M=>{let K=document.getElementById("paddings-input-portal"),V=M.target;K&&!K.contains(V)&&_.current&&!_.current.contains(V)&&(E(!1),S(!1),Q(),p&&p(e))},pe=M=>{M.key==="Escape"&&(E(!1),S(!1),Q(),p&&p(e))};(0,P.useEffect)(()=>(h||(k?(y("click",ae),y("keyup",pe)):(d("click",ae),d("keyup",pe),p&&p(e))),()=>{d("click",ae),d("keyup",pe)}),[h,k]);let oe=(0,P.useMemo)(()=>m?b||h?1:0:b||h?2:1,[h,b]),ce=(0,P.useMemo)(()=>r?`calc(100% - ${a+l}px)`:`${oe}px`,[oe,a,l]),fe=(0,P.useMemo)(()=>r?`${oe}px`:`calc(100% - ${s+g}px)`,[oe,s,g]),De=(0,P.useMemo)(()=>r?0+a:void 0,[a]),Be=(0,P.useMemo)(()=>r?void 0:0+g,[g]),Fe=t?"tomato":"blue",et=(0,P.useMemo)(()=>({width:r?"100%":o,height:r?o:`calc(100% - ${g+s}px)`,marginTop:r?0:g}),[r,o,g,s]),we=(0,P.useMemo)(()=>({width:m?"100%":r?ce:`${Rt}px`,height:m||r?Rt:fe,left:m?0:De,top:Be}),[m,r,ce,fe,De,Be]);return ie(Z.Box,{ref:_,position:"absolute",width:r?"100%":void 0,height:r?void 0:"100%",left:r?0:void 0,top:r?void 0:0,[e]:0,children:[x(Z.Box,{backgroundColor:"rgba(28, 222, 180, 0.18)",style:et}),ie(Z.Box,{position:"absolute",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),onMouseDown:M=>{let K=document.getElementById("paddings-input-portal");if(!(K&&K.contains(M.target))){if(!k){let V=M.target.getBoundingClientRect(),tt=r?V.x:V.y;O(tt),z(Math.max(0,(r?M.clientX:M.clientY)-tt)),E(!0)}w(r?M.screenY:M.screenX),S(!0),f&&f(e)}},[e]:m?0:"100%",cursor:r?"row-resize":"col-resize",style:we,children:[x(Z.Box,{position:"absolute",width:r?"100%":void 0,height:r?void 0:"100%",bottom:e==="top"?"100%":void 0,top:e==="bottom"?"100%":void 0,left:e==="right"?"100%":void 0,right:e==="left"?"100%":void 0,children:x(us,{isSmall:i,position:R,isActive:k,onChange:n,value:o,from:e,disabled:h})}),x(Z.Box,{display:"flex",width:"100%",height:"100%",alignItems:e==="top"?"flex-start":"flex-end",justifyContent:e==="right"?"flex-end":void 0,children:x(Z.Box,{style:{width:r?"100%":`${oe}px`,height:r?`${oe}px`:"100%",backgroundColor:b||h||m||o&&o>0?Fe:"transparent"}})})]}),m&&x(Z.Box,{position:"absolute",backgroundColor:o&&o>1?Fe:"transparent",top:0,height:"1px",style:{left:De,width:ce}})]})});Bo=ds});function zs({permission:e,children:t}){let n=Xe(e);return x(Ao,{disabled:!n,children:t})}function Xe(e){return Nn.isPermissionAllowed(e)}var Fo,No,Ao,Nt=H(()=>{"use strict";Fo=$(it()),No=$(Ee());Qr();N();Ao=(0,Fo.styled)(No.Box)`
  &[disabled] {
    opacity: 0.4 !important;
    pointer-events: all !important;
    cursor: default !important;

    * {
      user-select: none !important;
      pointer-events: none !important;
      cursor: default !important;
    }

    input::selection {
      background: transparent !important;
    }
  }
`;Ao.displayName="PermissionContainer"});function ps({children:e,...t}){let{model:{isEditMode:n,useTextWidgetStore:o}}=(0,ee.useContext)(He),{model:i}=(0,ee.useContext)(Ve),s=i.flags?.calculatedLineHeight,a=Xe("TextCanChangePaddings"),[l,g]=o({partial:!1}),[f]=Ce(),{blockKey:p,block:u}=(0,ee.useMemo)(()=>{if(!t["data-offset-key"])return{};let w=t["data-offset-key"].split("-")[0],_=l.getCurrentContent().getBlockForKey(w);return{blockKey:w,block:_}},[t,l]),c=(0,ee.useMemo)(()=>Le({block:u}),[u]),y=(0,ee.useMemo)(()=>!!(p&&I.isBlockSelected(l,p)),[l,p]),d=y?"var(--editor-border-color)":"transparent",r=(0,ee.useMemo)(()=>[...f.global,...f.project].find(w=>w.name===c),[c,f,l]),{paddings:m,changedPaddings:b}=(0,ee.useMemo)(()=>{let w=Lt({block:u}),_=r?Cn(r):{};return{paddings:{left:0,right:0,top:0,bottom:0,..._,...w},changedPaddings:$n({blockPaddings:w,stylePaddings:_})}},[l,u,r,f]),v=w=>{let _=I.getSelectedBlocks(l),L=l.getCurrentContent(),O=_.reduce((R,z)=>{let J=L.getBlockForKey(z);if(J){let ne=Lt({block:J});return jn({editorState:R,block:J,paddings:{...ne,...w}})}return R},l);g(O)},h=(0,ee.useMemo)(()=>pt({block:u}),[l,u,f]),S=(0,ee.useMemo)(()=>Fn({block:u}),[l,u]),k=(0,ee.useMemo)(()=>s?I.getBaseLineHeightStyle({block:u,width:i.w}):{},[l,u,f]),E=(0,ee.useMemo)(()=>{if(u&&!_e({block:u})){let{r:_,g:L,b:O,a:R}=at(I.getDefaultListTextColor(u));return`rgba(${_}, ${L}, ${O}, ${R})`}},[l,u]),T=a===!1?a:n&&y;return x(Wo.Box,{...t,position:"relative",style:{lineHeight:typeof h=="number"?`${h}px`:void 0,textIndent:typeof S=="number"?`${S}px`:void 0,...k},css:zo.css`
        // Заглушаем паддинги текстового стиля, чтобы отдать управление ими в TextPaddings
        padding: 0 !important;

        // Хак рамки, чтобы у нескольких элементов подряд не вышло 2px рамки
        &:after {
          content: '';
          pointer-events: none;
          box-shadow: 1px 0 0 0 ${d}, 0 1px 0 0 ${d}, 1px 1px 0 0 ${d},
            1px 0 0 0 ${d} inset, 0 1px 0 0 ${d} inset;
          position: absolute;
          top: 0;
          left: -1px;
          width: calc(100% + 1px);
          height: calc(100% - 1px);
        }

        // Дефолтный цвет для списков
        .editor-block-wrapper:before,
        div[data-offset-key]:before,
        & > li:before {
          ${E?`color: ${E};`:""}
        }
      `,children:x(Bo,{editable:T,top:m.top,left:m.left,bottom:m.bottom,right:m.right,changedPaddings:b,onChange:v,children:e},p)})}var ee,Wo,zo,Ho,Vo=H(()=>{"use strict";ee=$(re());ct();mt();Wo=$(Ee());Ft();On();Kr();We();In();Zr();Rn();Tt();ze();Nt();zo=$(it());N();Ho=ps});var qo,bt,Uo,At=H(()=>{"use strict";qo=$(qr());dn();ze();st();We();Vo();N();bt={...cn,..._n,...fn},Uo=()=>{let e=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,t={...Tn(),...pn,...Ln};return qo.default.Map(Object.keys(t).reduce((n,o)=>{let i=t[o].element,s=e?Ho:i,a=dt(o)?x(En,{type:o}):void 0;return Object.assign(n,{[o]:{...t[o],element:s,wrapper:a}}),n},{}))}});var Ko=H(()=>{"use strict";Nt()});var Go,Yo,fs,ms,gs,Xo=H(()=>{"use strict";Go=$(ln()),Yo=(e,t)=>{let n=e.current,o=n?.editor;if(!n||!o)return;let i=()=>{let a=o;if(a){let l=new MouseEvent("mouseup",{view:t,bubbles:!0,cancelable:!0});a.dispatchEvent(l)}},s=a=>{a.stopPropagation(),a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1,n._dragCount=0,n.exitCurrentMode();let l=gs(a);if(l){if(n.props?.handleDrop){let g=n._internalDrag?"internal":"external";n.props?.handleDrop(l,{},g)}n._internalDrag=!1,i()}};return o.addEventListener("drop",s,!0),{unregister(){o.removeEventListener("drop",s,!0)}}},fs=e=>!e||!e.ownerDocument?document:e.ownerDocument,ms=e=>{let t="data-offset-key",n=e.nodeType===Node.TEXT_NODE&&e.parentElement||e;if(!n)return null;let o=n.closest(`[${t}]`);if(!o)return null;let s=o.getAttribute(t)?.split("-");return s&&s.length?s[0]:null},gs=e=>{let t=null,n=null,o=fs(e.currentTarget);if(typeof o.caretRangeFromPoint=="function"){let a=o.caretRangeFromPoint(e.x,e.y);t=a?.startContainer,n=a?.startOffset}else if(e.rangeParent)t=e.rangeParent,n=e.rangeOffset;else return null;let i=ms(t);return i?new Go.SelectionState({anchorKey:i,anchorOffset:n,focusKey:i,focusOffset:n,isBackward:!1,hasFocus:!1}):null}});var U,vt,Zo,Jo,ys,Qo,er=H(()=>{"use strict";U=$(re()),vt=$(ln()),Zo=$(Ee());At();hn();Xn();mt();ni();Vr();Jo=$(gt());Ko();Xo();ti();_t();ct();N();ys=(0,U.forwardRef)(({isEditMode:e,textDirection:t,autosize:n,columns:o,verticalAlign:i,bgColor:s,selectionColor:a,shouldShowSelectionBorder:l,useBaseline:g,disableSelectionHighlight:f,...p},u)=>{let c=(0,U.useRef)(null),y=(0,U.useContext)(Jo.StyledFrameContext),d=Xe("TextCanChangeTypography");(0,U.useEffect)(()=>{if(c&&c.current!==null){let h=y&&y.window||window,S=c,k=Vn(S,h),E=Yo(S,h),T=qn(S,{forceCleanText:!d});return()=>{k.unregister(),E?.unregister(),T?.unregister()}}},[c]),(0,U.useEffect)(()=>{let h=u;h!==null&&h.current&&c.current&&!h.current.focusEditor&&(h.current.focusEditor=c.current.focus)},[c,u]);let r=(0,U.useCallback)((h,S,k,E)=>{let{mag:T,workspace:w}=window.RM.constructorRouter,_=Un(h,k,T),L;switch(_){case"Link":{let O=zn(h,T);if(O){let R=wn(),z=Hn(T,R.project,R.global)||Ue.name;L=Bn({editorState:k,url:h,type:O,linkStyle:z}),w.controls?.select(w.controls?.findControl("text_link"))}break}case"Text":{L=Kn({text:h,html:S,editorState:k,pastedWithShift:E});break}}return L?(E||window.RM.constructorRouter.trigger("notice:triggerEduTip","textWidgetPasteWithoutFormatting",{showOnce:!0}),p.onChange(L),"handled"):"not-handled"},[p.onChange]),m=(0,U.useCallback)((h,S)=>{if(h.shiftKey){let E=I.insertBreakLine(S);return p.onChange(E),"handled"}let k=I.cloneStylesOnReturn(S);if(k){let{status:E,editorState:T}=k;return p.onChange(T),E}return"not-handled"},[p.onChange]),b=(0,U.useCallback)(h=>h?(p.onChange(I.moveText({editorState:p.editorState,dropSelection:h})),"handled"):"not-handled",[p.onChange,p.editorState]),v=(0,U.useMemo)(()=>vt.DefaultDraftBlockRenderMap.merge(Uo()),[]);return x(Yn,{ref:u,textDirection:t,autosize:n,columns:o,verticalAlign:i,bgColor:s,selectionColor:a,shouldShowSelectionBorder:l,useBaseline:g,isEditMode:e,disableSelectionHighlight:f,children:x(Zo.Box,{children:x(vt.Editor,{ref:c,spellCheck:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",stripPastedStyles:!1,blockRenderMap:v,customStyleFn:Sn,handlePaste:r,handleReturn:m,handleDrop:b,...p})})})}),Qo=ys});var tr,nr,Wa,Wt,or=H(()=>{"use strict";kt();tr=({userId:e})=>q.get(`/api/list-styles/global/${e}`),nr=({projectId:e})=>q.get(`/api/list-styles/project/${e}`),Wa=({userId:e,styles:t})=>q.put(`/api/list-styles/global/${e}`,{styles:t}),Wt=({projectId:e,styles:t})=>q.put(`/api/list-styles/project/${e}`,{styles:t})});var rr,ir,Va,zt,sr=H(()=>{"use strict";kt();rr=({userId:e})=>q.get(`/api/link-styles/global/${e}`),ir=({projectId:e})=>q.get(`/api/link-styles/project/${e}`),Va=({userId:e,styles:t})=>q.put(`/api/link-styles/global/${e}`,{styles:t}),zt=({projectId:e,styles:t})=>q.put(`/api/link-styles/project/${e}`,{styles:t})});var ar,lr,Ka,Ht,cr=H(()=>{"use strict";kt();ar=({userId:e})=>q.get(`/api/text-styles/global/${e}`),lr=({projectId:e})=>q.get(`/api/text-styles/project/${e}`),Ka=({userId:e,styles:t})=>q.put(`/api/text-styles/global/${e}`,{styles:t}),Ht=({projectId:e,styles:t})=>q.put(`/api/text-styles/project/${e}`,{styles:t})});function Vt(){return Ss.map(e=>({...e,name:`style-${Qn()}`}))}var Ss,Za,ur=H(()=>{"use strict";ii();st();Ss=[{label:"H1",tag:"h1",cssProperties:{color:"22222264",fontFamily:"Roboto",fontStyle:"normal",textAlign:"left",fontSize:48,fontWeight:700,letterSpacing:0,lineHeight:60,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"H2",tag:"h2",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:24,fontWeight:400,letterSpacing:0,lineHeight:30,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"Text",tag:"p",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:18,fontWeight:400,letterSpacing:0,lineHeight:23,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"Caption",tag:"p",cssProperties:{color:"22222232",fontFamily:"Georgia",fontStyle:"italic",textAlign:"left",fontSize:14,lineHeight:18,letterSpacing:0,fontWeight:400,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}];Za=[{label:"List item",cssProperties:{color:"22222264",fontFamily:A.fontFamily,fontStyle:A.fontStyle,textAlign:"left",fontSize:A.fontSize,fontWeight:Number(A.fontWeight),letterSpacing:0,lineHeight:A.lineHeight,paddingRight:0,paddingLeft:0,width:26}}]});var Ze,dr,xl,wl,pr,qt,fr,kl,mr=H(()=>{"use strict";Ur();Tt();Fr();qe();Dr();ci();qe();Jr();st();_t();Ze=(e,t)=>e?`${e}${mn(typeof t=="number"?t:100)}`:"",dr=(e,t)=>no.switchTextToViewport(e,t),xl=(e,t)=>{let n={...e},{entityMap:o}=n;return o&&Object.values(o).forEach(i=>{let s=i;s&&s.type===Dn&&s.data&&!s.data.pageId&&s.data.type==="Page"&&(s.data.pageId=t.getPageId(s.data.pageUri||s.data.pageNum))}),{...n,flags:{...n.flags||{},updatedLinks:!0}}},wl=e=>{let t={...e},n=t.text,{blocks:o,styles:i,entityMap:s,blocksMeta:a}=Ke({str:n}),l=o.map(p=>p.key),g=Object.values(s).map(p=>p.data.id),f={blocks:o,styles:i,entityMap:s,blocksMeta:a};if(t.viewport_phone_portrait){let p=dr(n,"phone_portrait"),{styles:u,blocksMeta:c,entityMap:y}=Ke({str:p,blockKeys:l,entityKeys:g});f.viewport_phone_portrait={blocksMeta:c,entityMap:y,styles:u,bgColor:Ze(t.viewport_phone_portrait.bg_color,t.viewport_phone_portrait.bg_opacity*100),columns:{count:t.viewport_phone_portrait.column_count,gap:t.viewport_phone_portrait.column_gap}},t.viewport_phone_portrait={...t.viewport_phone_portrait,...f.viewport_phone_portrait},t.viewport_phone_portrait.hasOwnProperty("hidden")||(t.viewport_phone_portrait.hidden=!1),delete t.viewport_phone_portrait.column_count,delete t.viewport_phone_portrait.column_gap,delete t.viewport_phone_portrait.bg_color,delete t.viewport_phone_portrait.bg_opacity}if(t.viewport_tablet_portrait){let p=dr(n,"tablet_portrait"),{styles:u,blocksMeta:c,entityMap:y}=Ke({str:p,blockKeys:l,entityKeys:g});f.viewport_tablet_portrait={blocksMeta:c,entityMap:y,styles:u,bgColor:Ze(t.viewport_tablet_portrait.bg_color,t.viewport_tablet_portrait.bg_opacity*100),columns:{count:t.viewport_tablet_portrait.column_count,gap:t.viewport_tablet_portrait.column_gap}},t.viewport_tablet_portrait={...t.viewport_tablet_portrait,...f.viewport_tablet_portrait},t.viewport_tablet_portrait.hasOwnProperty("hidden")||(t.viewport_tablet_portrait.hidden=!1),delete t.viewport_tablet_portrait.column_count,delete t.viewport_tablet_portrait.column_gap,delete t.viewport_tablet_portrait.bg_color,delete t.viewport_tablet_portrait.bg_opacity}return t={...t,autosize:t.autosize,verticalAlign:"top",blocks:f.blocks,styles:f.styles,entityMap:f.entityMap,blocksMeta:f.blocksMeta,bgColor:Ze(t.bg_color,t.bg_opacity*100),columns:{count:t.column_count,gap:t.column_gap},version:3,column_count:void 0,column_gap:void 0,bg_color:void 0,bg_opacity:void 0,text:void 0},t},pr=e=>{let t=["none",0,"baseline"],n=["opacity"];return e.map(o=>{let{_name:i,_caption:s,tag:a,_sort:l,...g}=o,f=Object.keys(g).reduce((u,c)=>{let y=Pn(c),d=g[c];if(n.includes(c)||t.includes(d))return{...u};if(y==="textAlign"&&d==="start")d="left";else if(y==="color"){let r=Number(g.opacity),m=r>0?parseFloat((r/100).toFixed(2)):1,b=yn(String(d),m);d=gn(b)}else y.includes("padding")?d=Number(d):y==="fontWeight"&&d==="normal"&&(d=A.fontWeight);return{...u,[y]:d}},{});return f.paddingLeft=f.paddingLeft||0,f.paddingRight=f.paddingRight||0,f.paddingTop=f.paddingTop||0,f.paddingBottom=f.paddingBottom||0,{name:i,label:s,tag:a||Xt.AVAILABLE_TEXT_TAGS[0],cssProperties:f}})},qt=(e,t)=>{let n=u=>{switch(u){case"none":return"None";case"dotted":return"Dotted";case"dashed":return"Dashed";case"solid":return"Solid";default:break}},o=u=>t?`${t}-${u}`:u,i=typeof e[o("color")]<"u"?e[o("color")]:e.color,s=typeof e[o("opacity")]<"u"?e[o("opacity")]:e.opacity,a=typeof e[o("u-color")]<"u"?e[o("u-color")]:e["u-color"],l=typeof e[o("u-opacity")]<"u"?e[o("u-opacity")]:e["u-opacity"],g=typeof e[o("u-size")]<"u"?e[o("u-size")]:e["u-size"],f=typeof e[o("u-offset")]<"u"?e[o("u-offset")]:e["u-offset"],p=typeof e[o("u-style")]<"u"?e[o("u-style")]:e["u-style"];return{textColor:Ze(String(i==="inherit"?e.color:i),Number(s==="inherit"?e.opacity:s)),color:Ze(String(a==="inherit"?e["u-color"]:a),Number(l==="inherit"?e["u-opacity"]:l)),size:Number(g==="inherit"?e["u-size"]:g),padding:Number(f==="inherit"?e["u-offset"]:f),type:n(p)}},fr=e=>e.map(n=>{let{_name:o,_caption:i}=n,s=qt(n),a=qt(n,"hover"),l=qt(n,"current");return{name:o,label:i,style:{link:s,hover:a,current:l}}}),kl=(e,t)=>{/px/i.test(String(t["font-size"]))||(t["font-size"]+="px"),/px/i.test(String(t["letter-spacing"]))||(t["letter-spacing"]+="px"),/px/i.test(String(t["line-height"]))||(t["line-height"]+="px"),/#/i.test(String(t.color))||(t.color="#"+t.color),t.opacity=parseInt(String(t.opacity))/100,t.padding="10px 37px 0px";let o=`<p style="${Object.keys(t).reduce((i,s)=>[...i,`${s}: ${t[s]}`],[]).join(";")}">${e}</p>`;return Ke({str:o})}});function bs(e){if(!e)return x("div",{style:{width:"100%"}});let t=(0,gr.useMemo)(()=>Je(e),[e.type,e.size,e.color,e.padding]);return x("div",{style:{...t,width:"100%"}})}var gr,Je,_l,yr=H(()=>{"use strict";gr=$(re());Tt();qe();N();Je=e=>{let{type:t="None",color:n="00000064",size:o=1,padding:i=0}=e||{},{r:s,g:a,b:l,a:g}=at(n),f=`rgba(${s}, ${a}, ${l}, ${g})`,p="repeat-x",u=o+i,c=u>0?"0 100%":`0 ${100+u}%`,y={textDecoration:"none",paddingBottom:Math.max(0,u)};switch(t){case"Solid":return{...y,background:`linear-gradient(to right, ${f} 0%, ${f} 100%) ${c}/1px ${o}px ${p}`};case"Dotted":return{...y,background:`linear-gradient(to right, ${f} 0%, ${f} 50%, transparent 50%, transparent 100%) ${c}/${o*2}px ${o}px ${p}`};case"Dashed":return{...y,background:`linear-gradient(to right, ${f} 0%, ${f} 66.6666%, transparent 66.6666%, transparent 100%) ${c}/${o*3}px ${o}px ${p}`};default:return{...y,background:"none"}}};_l=bs});function xt({mode:e}){let[t,n]=Ce(),[o,i]=vn(),[s,a]=lt();(0,de.useEffect)(()=>{if(e==="constructor"){let u=[],c=[],y=[];if(!t.project.length){let r=window.ServerData.textStyles,m=Vt();if(!r||!r.project||!r.project.length){let b=window.ServerData?.editParams?.paragraph_styles;b&&b.length&&(m=pr(b))}u=r?.project&&r?.project.length?r.project:m,n({global:r?.global||[],project:u})}if(!o.project.length){let r=window.ServerData.linkStyles,m=[Ue];if(!r||!r.project||!r.project.length){let b=window.ServerData.editParams&&window.ServerData.editParams.link_styles;b&&b.length&&(m=fr(b))}c=r?.project&&r.project.length?r.project:m,i({global:r?.global||[],project:c})}if(!s.project.length){let r=window.ServerData.listStyles;y=r?.project&&r?.project.length?r.project:[],a({global:r?.global||[],project:y})}let d=[];u.length&&!(0,Qe.default)(u,window.ServerData.textStyles?.project||[])&&d.push(Ht({styles:u,projectId:window.ServerData.projectId})),c.length&&!(0,Qe.default)(c,window.ServerData.linkStyles?.project||[])&&d.push(zt({styles:c,projectId:window.ServerData.projectId})),y.length&&!(0,Qe.default)(y,window.ServerData.listStyles?.project||[])&&d.push(Wt({styles:y,projectId:window.ServerData.projectId})),d.length&&Promise.all(d)}if(e==="viewer"||e==="screenshoter"){let u=e==="viewer",c=u?window.ServerData?.mags?.mag?.textStyles||window.RM?.viewerRouter?.mag?.textStyles:window.ServerData?.mag?.textStyles;c&&n({global:c?.global?.length?c.global:[],project:c?.project?.length?c.project:[]});let y=u?window.ServerData?.mags?.mag?.linkStyles||window.RM?.viewerRouter?.mag?.linkStyles:window.ServerData?.mag?.linkStyles;y&&i({global:y?.global?.length?y.global:[],project:y?.project?.length?y.project:[]});let d=u?window.ServerData?.mags?.mag?.listStyles||window.RM?.viewerRouter?.mag?.listStyles:window.ServerData?.mag?.listStyles;d&&a({global:d?.global?.length?d.global:[],project:d?.project?.length?d.project:[]})}},[]);let l=(0,de.useMemo)(()=>Object.keys(bt).map(c=>bt[c].style).join(" "),[bt]),g=(0,de.useMemo)(()=>{let u=d=>{let r=ws(d.cssProperties);return`${r.textAlign}`==="justify"&&(r.whiteSpace="normal"),` .${d.name} { ${G(r)} } `},c=t.global.map(u),y=t.project.map(u);return[...c,...y].join(" ")},[t]),f=(0,de.useMemo)(()=>{let u=r=>{let m={...r.cssProperties};return typeof m.width=="number"&&(m.minWidth=m.width),m.lineHeight&&delete m.lineHeight,`
        .${r.name}-preview {
          ${G(r.cssProperties)}
        }
        .${r.name}.edit-mode .editor-block-wrapper {
          display: ${!r.listPosition||r.listPosition==="inside"?"block":"flex"};
        }
        .${r.name}.edit-mode .editor-block-wrapper:before, .${r.name}.edit-mode div[data-offset-key]:before {
          display: inline-block;
          ${G(m)}
          ${!r.listPosition||r.listPosition==="inside"?"line-height: 1;":""}
          ${r.baselineShift?`transform: translateY(${r.baselineShift}px);`:""}
        }
        .${r.name}.view-mode {
          display: ${!r.listPosition||r.listPosition==="inside"?"list-item":"flex"};
        }
        .${r.name}.view-mode:before {
          display: inline-block;
          ${G(m)}
          ${!r.listPosition||r.listPosition==="inside"?"line-height: 1;":""}
          ${r.baselineShift?`transform: translateY(${r.baselineShift}px);`:""}
        }

        .unordered-list-item.${r.name}.edit-mode div[data-offset-key]:before {
          content: "${r.markerContent||"\u2022"}\\00a0";
          display: ${!r.listPosition||r.listPosition==="inside"?"inline-block":"none"};
          white-space: nowrap;
        }
        .unordered-list-item.${r.name}.edit-mode .editor-block-wrapper:before {
          content: "${r.markerContent||"\u2022"}\\00a0";
          display: ${r.listPosition&&r.listPosition==="outside"?"inline-block":"none"};
          white-space: nowrap;
        }

        .ordered-list-item.${r.name}.edit-mode div[data-offset-key]:before {
          counter-increment: ${ue};
          content: counter(${ue})".";
          display: ${!r.listPosition||r.listPosition==="inside"?"inline-block":"none"};
          white-space: nowrap;
        }

        .ordered-list-item.${r.name}.edit-mode .editor-block-wrapper:before {
          counter-increment: ${ue};
          content: counter(${ue})".";
          display: ${r.listPosition&&r.listPosition==="outside"?"inline-block":"none"};
          white-space: nowrap;
        }

        .unordered-list-item .${r.name}.view-mode:before {
          content: "${r.markerContent||"\u2022"}\\00a0";
        }`},c=`
      .${se}.edit-mode .editor-block-wrapper {
        display: flex;
      }
      .${se}.view-mode {
        display: flex;
      }
      .${se}.view-mode:before {
        display: inline-block;
      }

      .unordered-list-item.${se}.edit-mode .editor-block-wrapper:before {
        content: "\u2022\\00a0";
        display: inline-block;
      }
      .unordered-list-item.${se}.edit-mode div[data-offset-key]:before {
        content: "\u2022\\00a0";
        display: none;
      }

      .ordered-list-item.${se}.edit-mode .editor-block-wrapper:before {
        counter-increment: ${ue};
        content: counter(${ue})".";
        display: inline-block;
        white-space: nowrap;
      }
      .ordered-list-item.${se}.edit-mode div[data-offset-key]:before {
        counter-increment: ${ue};
        content: counter(${ue})".";
        display: none;
        white-space: nowrap;
      }

      .unordered-list-item .${se}.view-mode:before {
        content: "\u2022\\00a0";
      }`,y=s.global.map(u),d=s.project.map(u);return[c,...y,...d].join(" ")},[s]),p=(0,de.useMemo)(()=>{let u=d=>{let r=d.style?.link?`
        .${d.name} {
          ${G(Je(d.style.link))}
          ${G({color:d.style.link.textColor})}
        }

        .${d.name} * {
          ${G({color:d.style.link.textColor})}
        }`:"",m=d.style?.hover?`
        .${d.name} .hover, .${d.name}:hover {
          ${G(Je(d.style.hover))}
          ${G({color:d.style.hover.textColor},!0)}
        }

        .${d.name} .hover *, .${d.name}:hover * {
            ${G({color:d.style.hover.textColor},!0)}
        }`:"",b=d.style?.current?`
        .${d.name}.current {
          ${G(Je(d.style.current))}
          ${G({color:d.style.current.textColor})}
        }

        .${d.name}.current * {
          ${G({color:d.style.current.textColor})}
        }`:"";return`
        ${r}
        ${m}
        ${b}
      `},c=o.global.map(u),y=o.project.map(u);return[...c,...y].join(" ")},[o]);return x(xs,{blockStyles:l,textStyleSheet:g,linkStyleSheet:p,listStyleSheet:f})}var de,Qe,Ut,Sr,vs,xs,ws,Yl,Xl,hr=H(()=>{"use strict";de=$(re()),Qe=$(to()),Ut=$(Pt()),Sr=$(Xr());or();sr();cr();ur();mr();_t();ct();At();We();yr();qe();ze();N();vs=async()=>{let e=window.RM.constructorRouter.mag.get("_id"),t=window.RM.constructorRouter.me&&window.RM.constructorRouter.me.get("_id");if(!e||!t)throw new Error("Cannot load text styles");let[{data:n},{data:o},{data:i},{data:s},{data:a},{data:l}]=await Promise.all([lr({projectId:e}),ar({userId:t}),ir({projectId:e}),rr({userId:t}),nr({projectId:e}),tr({userId:t})]);return{textStyles:{global:o&&o.length?o:[],project:n&&n.length?n:Vt()},linkStyles:{global:s&&s.length?s:[],project:i&&i.length?i:[Ue]},listStyles:{global:l&&l.length?l:[],project:a&&a.length?a:[]}}},xs=(0,de.memo)(e=>x("style",{dangerouslySetInnerHTML:{__html:(0,Sr.minifyCSSString)(`
          ${e.blockStyles}
          ${e.textStyleSheet}
          ${e.linkStyleSheet}
          ${e.listStyleSheet}
        `)}}),(e,t)=>(0,Qe.default)(e,t)),ws=e=>Object.keys(e).reduce((t,n)=>{let o=e[n];return typeof o=="string"&&`${o}`.includes("(")&&!String(o).includes(")")&&(o=`${o})`),o&&n==="opacity"&&parseInt(String(o))>1&&(o=parseInt(`${o}`)/100),{...t,[n]:o}},{});Yl=e=>{let t="text-global-styles",n=document.querySelector(`#${t}`);n?Ut.default.render(x(xt,{mode:e}),n):(n=document.createElement("div"),n.id=t,document.body.appendChild(n),Ut.default.render(x(xt,{mode:e}),n))},Xl=async({newTextStyles:e,newLinkStyles:t,newListStyles:n})=>{let o=await vs();if(e&&e.length){let i=e.filter(s=>!o.textStyles.project.some(a=>a.name===s.name));if(i.length){let s=[...o.textStyles.project,...i];bn({global:o.textStyles.global,project:s}),Ht({styles:s,projectId:window.ServerData.projectId})}}if(n&&n.length){let i=n.filter(s=>!o.listStyles.project.some(a=>a.name===s.name));if(i.length){let s=[...o.listStyles.project,...i];kn({global:o.listStyles.global,project:s}),Wt({styles:s,projectId:window.ServerData.projectId})}}if(t&&t.length){let i=t.filter(s=>!o.linkStyles.project.some(a=>a.name===s.name));if(i.length){let s=[...o.linkStyles.project,...i];xn({global:o.linkStyles.global,project:s}),zt({styles:s,projectId:window.ServerData.projectId})}}}});var F,br,vr,uc,xr=H(()=>{"use strict";F=$(re());hn();ct();mt();st();ze();We();In();ri();br=$(Nr()),vr=(e,t={})=>{let[n,o]=Ct(),[i]=Ce(),s=Array.isArray(e)?e:[e],a=(0,F.useMemo)(()=>s.map(r=>I.getCurrentBlock(r)),[s]),l=(0,F.useMemo)(()=>[...i.global,...i.project],[i.global,i.project]),g=(0,F.useMemo)(()=>s.map(r=>Le({editorState:r})),[s]),f=(0,F.useMemo)(()=>g.map(r=>l.find(m=>m.name===r)).filter(Boolean),[g,l]),p=(0,F.useMemo)(()=>s.map((r,m)=>{let b=I.getCurrentInlineStyles(r,"FONT_FAMILY"),v=f[m];return b.length?b[0]:v?v.cssProperties.fontFamily||"":A.fontFamily}),[f,s]),u=(0,F.useMemo)(()=>s.map((r,m)=>{let b=I.getCurrentInlineStyles(r,"FONT_STYLE"),v=f[m];return b.length?b[0]:v?v.cssProperties.fontStyle||"":A.fontStyle}),[f,s]),c=(0,F.useMemo)(()=>s.map((r,m)=>{let b=I.getCurrentInlineStyles(r,"FONT_WEIGHT"),v=f[m];return b.length?b[0]:v?v.cssProperties.fontWeight||"":A.fontWeight}),[f,s]);(0,F.useEffect)(()=>{if(t.listenFontFeaturesUpdates&&p.length&&c.length&&u.length){let r=s.map((m,b)=>{let v=(0,br.uniq)(p)[b],h=c[b],S=u[b];if(v){let k=Ae({fontFamily:v,fontWeight:h,fontStyle:S});if(!n[k])return I.getFontFeatures({fontFamily:v,fontWeight:h,fontStyle:S}).then(T=>({res:T,key:k}))}});Promise.all(r).then(m=>{let b={};m.forEach(v=>{v?.res&&(b[v.key]=v.res)}),Object.keys(b).length!==0&&o({...n,...b})})}},[s]);let y=(0,F.useMemo)(()=>s.map((r,m)=>{let b=p[m],v=c[m],h=u[m];if(b&&v&&h){let S=Ae({fontFamily:b,fontWeight:v,fontStyle:h});return n[S]}}),[s,n]);return(0,F.useMemo)(()=>{let r={textStyle:[],textStyleName:[],fontFamily:[],fontStyle:[],fontWeight:[],fontInfo:[],fontSize:[],lineHeight:[],ratio:[],letterSpacing:[],fontSizeLinkStatus:[],letterSpacingLinkStatus:[]};for(let m=0;m<s.length;m++){let b=s[m],v=f[m],h=a[m],S=y[m],k=g[m],E=p[m],T=u[m],w=c[m],_=v&&v.name!=="unstyled",L=_&&ut(v?.cssProperties.fontSize),O=_&&ut(v?.cssProperties.lineHeight),R=_&&ut(v?.cssProperties.letterSpacing,!0),z=I.getCurrentInlineStyles(b,"FONT_SIZE"),J=I.getCurrentInlineStyles(b,"LETTER_SPACING"),ne=pt({block:h}),Q=I.getCurrentInlineStyles(b,"IS_LINKED_LETTER_SPACING"),ae=Jn({block:h}),pe=z?.length?parseInt(z[0]):L||A.fontSize,oe=J?.length?parseFloat(J[0]):R||0,ce=typeof ne=="number"?ne:O||A.lineHeight,fe=Q&&Q[0]&&typeof Q[0]<"u"?Q[0]==="true":!1;r.textStyle.push(v),r.textStyleName.push(k),r.fontFamily.push(E),r.fontStyle.push(T),r.fontWeight.push(w),r.fontInfo.push(S),r.fontSize.push(pe),r.lineHeight.push(ce),r.ratio.push(pe/ce),r.letterSpacing.push(oe),r.fontSizeLinkStatus.push(ae),r.letterSpacingLinkStatus.push(fe)}return r},[s,a,f,p,y,u,c,g])},uc=(e,t={})=>{let[n,o]=Ct(),[i]=lt(),s=(0,F.useMemo)(()=>[...i.global,...i.project],[i.global,i.project]),a=(0,F.useMemo)(()=>_e({editorState:e}),[e]),l=(0,F.useMemo)(()=>s.find(c=>c.name===a),[s,a]),g=(0,F.useMemo)(()=>{let c=I.getCurrentInlineStyles(e,"FONT_FAMILY");return l?l.cssProperties.fontFamily||"":c.length?c[0]:A.fontFamily},[l,e,a]),f=(0,F.useMemo)(()=>{let c=I.getCurrentInlineStyles(e,"FONT_STYLE");return l?l.cssProperties.fontStyle||A.fontStyle:c.length?c[0]:A.fontStyle},[l,e,a]),p=(0,F.useMemo)(()=>{let c=I.getCurrentInlineStyles(e,"FONT_WEIGHT");return l?l.cssProperties.fontWeight||"":c.length?c[0]:A.fontWeight},[l,e,a]);(0,F.useEffect)(()=>{if(t.listenFontFeaturesUpdates&&g&&p&&f){let c=Ae({fontFamily:g,fontWeight:p,fontStyle:f});n[c]||I.getFontFeatures({fontFamily:g,fontWeight:p,fontStyle:f}).then(d=>{if(d){let{features:r,variations:m,characters:b}=d;o({...n,[c]:{features:r,variations:m,characters:b}})}})}},[e,t.listenFontFeaturesUpdates]);let u=(0,F.useMemo)(()=>{if(g&&p&&f){let c=Ae({fontFamily:g,fontWeight:p,fontStyle:f});return n[c]}},[e,n]);return{listStyle:l,listStyleName:a,fontFamily:g,fontStyle:f,fontWeight:p,fontInfo:u}}});function ks({readOnly:e}){let{model:t,modelSet:n,modelSave:o}=(0,C.useContext)(Ve),{model:{useTextWidgetStore:i,isEditMode:s,workspace:a,selected:l,isJustCreated:g,disableSelectionHighlight:f,isResizing:p}}=(0,C.useContext)(He),[u,c]=i({partial:!1});vr(u,{listenFontFeaturesUpdates:!0});let{isPaddingsEnabled:y}=(0,C.useContext)(ht),{callback:d}=Et(o,400),{callback:r}=Et(w=>{if(s&&w.getLastChangeType()){let L=I.exportTextContent(w.getCurrentContent()),O=Object.keys(L),R=Jt(t,...O),z=Qt(L,R);n(L),z||d()}},20);(0,C.useEffect)(()=>{s&&g&&setTimeout(()=>{v.current?.focusEditor()},0)},[]),(0,C.useEffect)(()=>{r(u)},[u]);let m=(0,C.useMemo)(()=>u.getSelection().getHasFocus(),[u]),b=(0,C.useMemo)(()=>s,[s,m]),v=(0,C.useRef)(null),{height:h}=(0,Pr.useResizeEffect)(v),S=(0,C.useMemo)(()=>t.columns&&t.columns.count>1,[t.columns]);(0,C.useEffect)(()=>{!p&&h>0&&h!==t.h&&s&&!S&&t.autosize&&(n({h}),d())},[h,t.autosize,t.h,S,p]),(0,C.useEffect)(()=>{!Modernizr.firefox&&!s&&!u.getSelection().isCollapsed()&&c(I.clearSelection(u))},[s]);let k=(0,C.useCallback)(w=>{let _=w.getType(),L=Le({block:w}),O=un({block:w}),R=dt(_)?_e({block:w})||(t.flags?.newListPosition?se:void 0):void 0;return["edit-mode",_,L,O,R].filter(z=>z).join(" ")},[]),E=(0,C.useCallback)(w=>{let _=w.getSelection(),L=w;L=I.preserveBlockInlineStyles(L,u),L=I.applySelection(L,I.reverseSelection(_)),L=L.getSelection().isCollapsed()?L:I.applySelection(L,I.fixSelection(L)),Modernizr.safari&&!_.isCollapsed()&&(L=I.applySelection(L,L.getSelection(),!1)),c(L)},[u]),T=(0,C.useCallback)(w=>{let _=Wn({action:w,editorState:u,workspace:a});if(_){let{editorState:L,status:O}=_;return c(L),O}else return"not-handled"},[u,a]);return x(Qo,{ref:v,isEditMode:s,bgColor:t.bgColor,selectionColor:t.selectionColor,textDirection:t.textDirection||"LTR",autosize:t.autosize,columns:t.columns,verticalAlign:t.verticalAlign,useBaseline:t.flags?.baseline,shouldShowSelectionBorder:b,editorState:u,disableSelectionHighlight:f,blockStyleFn:k,onChange:E,readOnly:!s||!l||e||y,keyBindingFn:An,handleKeyCommand:T})}function Ps({size:e,height:t,width:n,onClick:o}){return ie(Te,{children:[x(xe.Box,{position:"absolute",top:0,left:0,onClick:o,userSelect:"none",style:{width:n+e*2,height:e}}),x(xe.Box,{position:"absolute",bottom:0,left:0,onClick:o,userSelect:"none",style:{width:n+e*2,height:e}}),x(xe.Box,{position:"absolute",top:0,left:0,width:e,onClick:o,userSelect:"none",style:{width:e,height:t+e*2}}),x(xe.Box,{position:"absolute",top:0,right:0,onClick:o,userSelect:"none",style:{width:e,height:t+e*2}})]})}function Cs(){let{model:{useTextWidgetStore:e,fontStyles:t,isResizing:n,leaveEditMode:o,isEditMode:i,canControlsBeClosed:s,onIframeLoaded:a}}=(0,C.useContext)(He),[l]=e({partial:!1}),{model:{w:g,h:f}}=(0,C.useContext)(Ve),[p,u]=(0,C.useState)(!1);(0,C.useEffect)(()=>{p&&Zt.getFocusBack()},[p,n]);let c=(0,C.useRef)(null),y=(0,C.useMemo)(()=>{let T={position:"absolute",top:he*-1,left:he*-1,width:`calc(100% + ${he*2}px)`,height:`calc(100% + ${he*2}px)`};return{display:i?void 0:"none",pointerEvents:!i||p||n?"none":void 0,userSelect:"none",...T}},[he,i,p,n]),d=(0,C.useCallback)(()=>{s()&&o()},[s,o]),[r,m]=(0,C.useState)(!1),[b,v]=(0,C.useState)(!1);(0,C.useEffect)(()=>{i&&!r&&m(!0)},[i]);let[h,S]=(0,C.useState)(!1),k=(0,C.useRef)(null),E=()=>{let T=c.current?.contentDocument?.hasFocus()||!1;if(T){let w=c.current?.contentDocument?.getSelection();w&&w.anchorNode&&w.focusNode&&(k.current={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset})}S(T)};return(0,C.useEffect)(()=>(c.current?.contentDocument?.addEventListener("selectionchange",E),()=>{c.current?.contentDocument?.removeEventListener("selectionchange",E)}),[c.current?.contentDocument]),(0,C.useEffect)(()=>{if(Modernizr.safari){let T=l.getSelection(),w=T.getHasFocus();if(!h&&w&&!T.isCollapsed()){let _=c.current?.contentWindow?.getSelection();_&&k.current&&_.setBaseAndExtent(k.current.anchorNode,k.current.anchorOffset,k.current.focusNode,k.current.focusOffset)}}},[l,h]),x(Dt.Provider,{value:{ref:c},children:x(ht.Provider,{value:{isPaddingsEnabled:p,setIsPaddingsEnabled:u},children:ie(xe.Box,{position:"relative",width:"calc(var(--workspace-inverse-zoom) * 100%)",height:"calc(var(--workspace-inverse-zoom) * 100%)",zoom:"var(--workspace-inverse-zoom)",transform:"scale(var(--workspace-zoom))",transformOrigin:"left top",children:[r&&ie(kr.default,{ref:c,style:y,head:ie(Te,{children:[x("style",{children:`
                      body {
                        margin: 0;
                        height: 100vh;
                        width: 100vw;
                        overflow: hidden;
                        box-sizing: border-box;
                        padding: ${he}px ${he-Gn}px;
                      }

                      ol, ul {
                        padding: 0;
                        margin: 0;
                      }
                  `}),t.map((T,w)=>{if(T.tag==="style")return x("style",{children:`${T.style}`},w);if(T.tag==="link")return x("link",{rel:"stylesheet",type:T.type,href:T.href},w)})]}),contentDidMount:()=>{a(),v(!0)},children:[x(xt,{mode:"constructor"}),i&&x(Ts,{size:he,height:f,width:g,onClick:d}),x(ks,{})]}),i&&b?null:x(xe.Box,{height:"100%",width:"100%",position:"absolute",top:0,left:0,pointerEvents:"none",userSelect:"none",children:x(Zn,{editorState:l,isConstructorPreview:!0})})]})})})}var C,wr,xe,kr,Pr,Dt,Ts,he,Dc,Mo=H(()=>{C=$(re());Wr();ui();Rn();wr=$(to());er();mt();qe();We();dn();Ft();On();ei();hr();Ar();ze();oi();xe=$(Ee()),kr=$(gt());Xn();xr();Pr=$(eo());N();Dt=(0,C.createContext)({});Ts=(0,C.memo)(Ps,wr.default),he=500;Dc=Cs});export{Ao as a,zs as b,Xe as c,Ko as d,ho as e,$o as f,Ka as g,Ht as h,cr as i,vr as j,uc as k,xr as l,Wa as m,Wt as n,or as o,Va as p,zt as q,sr as r,xl as s,wl as t,pr as u,fr as v,kl as w,mr as x,Dt as y,he as z,Dc as A,Mo as B,_l as C,yr as D,vs as E,xt as F,Yl as G,Xl as H,hr as I};
