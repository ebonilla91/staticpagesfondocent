import{a as te,b as Ze,c as oe,d as Xe}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-WO5VZU3D.js";import{b as Oe,f as J,h as _e,i as K,j as Q,k as Te}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BQ57JNSR.js";import{a as ee,b as Ae}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-KB5NTUHE.js";import{a as We}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-E4W7IC46.js";import{a as Ve}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-MNYP3WVR.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-C6HPUPCL.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-7G52Q5ZO.js";import{a as q,g as He}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-XOCVWU26.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-V2UNE6ZB.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-LV5FH5B7.js";import{b as Z}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-HDRT62RD.js";import{d as A}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-LMXYD7AC.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-A4XRY3PY.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-TQPLAJYR.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-I4FBAQQB.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-X4WAQTSE.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OWKND2N3.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-U3EQ6JVM.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-4FR22MFU.js";import{G as i,H as R,J as p}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BPJUKUAP.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-3ZELX36Q.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-UPFOSVDA.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-PJF6UIFY.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-CHUQBVQY.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-U4UD4LYQ.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-QQSGI2X4.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-MKQKZXV6.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-42FJTMOJ.js";import{a as De}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-WSIFDYHJ.js";import{b as W,c as ze}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-OAY73AJW.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BWC6YUQZ.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-BHCSVH3M.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-TUZJEMYY.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-F5RDH3FM.js";import"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-L5GBYYT7.js";import{a as k,d as s}from"https://d1id5eheivyv24.cloudfront.net/98c7974b/dist/c/c-IDSWT3EJ.js";var re,ie,$e,Ne,ae,ne=k(()=>{"use strict";re=s(A()),ie=s(Z());p();$e=e=>i("svg",{width:64,height:64,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:i("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 4C0 1.79086 1.79086 0 4 0C6.20914 0 8 1.79086 8 4V60C8 62.2091 6.20914 64 4 64C1.79086 64 0 62.2091 0 60V4ZM56 28C56 25.7909 57.7909 24 60 24C62.2091 24 64 25.7909 64 28V36C64 38.2091 62.2091 40 60 40C57.7909 40 56 38.2091 56 36V28ZM46 18C43.7909 18 42 19.7909 42 22V42C42 44.2091 43.7909 46 46 46C48.2091 46 50 44.2091 50 42V22C50 19.7909 48.2091 18 46 18ZM28 16C28 13.7909 29.7909 12 32 12C34.2091 12 36 13.7909 36 16V48C36 50.2091 34.2091 52 32 52C29.7909 52 28 50.2091 28 48V16ZM18 6C15.7909 6 14 7.79086 14 10V54C14 56.2091 15.7909 58 18 58C20.2091 58 22 56.2091 22 54V10C22 7.79086 20.2091 6 18 6Z",fill:"#B8B8B8"})}),Ne=ie.Box.withComponent((0,re.styled)($e)`
      display: block;
    `),ae=Ne});var se,le,Ge,Ye,de,ce=k(()=>{"use strict";se=s(A()),le=s(Z());p();Ge=e=>R("svg",{width:8,height:8,viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i("circle",{cx:6,cy:6,r:2,fill:"#282828"}),i("circle",{cx:2,cy:2,r:2,fill:"#282828"}),i("circle",{cx:2,cy:6,r:2,fill:"white"}),i("circle",{cx:6,cy:2,r:2,fill:"white"})]}),Ye=le.Box.withComponent((0,se.styled)(Ge)`
      display: block;
    `),de=Ye});function Ke(e){let{model:{_id:m,w:n,h:u,basePath:l,numberOfImages:b,scrollSpeed:U=1,imageWidth:S=0,imageHeight:C=0,fixed_position:E,scrollStartPoint:M="bottom",playbackType:z,startPointOffset:v,scrollDelay:I,is_full_width:B,is_full_height:D,useEasing:P=!1,fileExtension:he,pausable:be,byStepSpeed:Se,byStepLoop:we,byStepSpringLoop:xe,firstFrameLambdaUrl:w},modelSave:ye}=(0,o.useContext)(q),{model:{currentScrollOffset:H,hoverPercent:O,mouseIn:x,pageScale:V=1,viewport:Ce,canDirectLinkBeUsed:ve,pageContentTop:Ie=0,magContainerHeight:Be=0,widgetBoxTop:Pe=0,isStarted:$=!1},model:N}=(0,o.useContext)(ee),[{isUploading:y,files:G,url:F},f]=e.useSharedState?e.useSharedState():Je,_=e.mode==="viewer",[Fe,Le]=(0,o.useState)(!1),[Y,ke]=(0,o.useState)(!1),j=(0,o.useRef)(null),c=(0,o.useRef)(null),Re=c.current,T=(0,o.useRef)(null),g=T.current,Ue=(r,t)=>{if(B||D)return{w:n,h:u};let d=r<=480?r:Math.round(r*480/r),L=t*d/r;return{w:d,h:L}},Ee=(0,o.useMemo)(()=>{if(w){let r=new URL(w);return r.searchParams.append("w","40"),r.toString()}},[w]);(0,o.useEffect)(()=>{l&&b&&(c.current=new te(l,_?b:1,he,()=>{ke(!0),e.onAllImagesLoaded&&e.onAllImagesLoaded()}),c.current.preloadFirstImage(),T.current=new oe(j.current,c.current,z==="mousemove"?1:0),T.current.drawImageByIndex(0).then(()=>{e.onFirstFrameLoaded&&e.onFirstFrameLoaded()}))},[l]);let[a,Me]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(!a)return;let r=(t,d)=>t===W.widget.defaults.w&&d===W.widget.defaults.h;ye({basePath:a.basePath,imageWidth:a.imageWidth,imageHeight:a.imageHeight,numberOfImages:a.numberOfImages,fileExtension:a.fileExtension,totalSize:a.totalSize,firstFrameLambdaUrl:a.firstFrameLambdaUrl,...r(n,u)?Ue(a.imageWidth||n,a.imageHeight||n):{}})},[a]),(0,o.useEffect)(()=>{let r=async()=>{try{let t;if(F&&F.length)t=await J(F,m);else{let{errorMsg:d,validated:L}=K(G);if(d||!L){f({isUploading:!1,uploadError:d}),setTimeout(()=>alert(d),0);return}t=await Q(L,m)}t&&t.basePath&&t.imageHeight&&t.imageWidth&&t.numberOfImages&&t.totalSize&&!N.isDestroyed&&!Fe?(Me({basePath:t.basePath,imageWidth:t.imageWidth,imageHeight:t.imageHeight,numberOfImages:t.numberOfImages,totalSize:t.totalSize,fileExtension:t.fileExtension,firstFrameLambdaUrl:t.firstFrameLambdaUrl}),f({isUploading:!1})):f({isUploading:!1,uploadError:"Error uploading video"})}catch{f({isUploading:!1,uploadError:"Error uploading video"})}};y&&(F||G)&&!N.isDestroyed&&r()},[y]),(0,o.useEffect)(()=>{!_||!c.current||($?c.current.startLoad():c.current.stopLoad())},[$]),(0,o.useEffect)(()=>{if(!Re)return;let r;if(!_)g?.drawImageByIndex(0);else if(typeof H<"u")r=qe({currentScrollOffset:H,pageContentTop:Ie,pageScale:V,magContainerHeight:Be,widgetBoxTop:Pe,scrollStartPoint:M,startPointOffset:v,scrollSpeed:U,scrollDelay:I,isFixed:!!E}),g?.drawImageByIndex(r,P);else if(typeof O<"u")g?.drawImageByTimelinePercent(O,P);else if(typeof x<"u")x&&g?.startDrawingByStep(b,{speed:Se,loop:we,spring:xe}),!x&&be?g?.pauseDrawingByStep():x||g?.stopDrawingByStep();else return},[H,Ce,n,u,O,x]),(0,o.useEffect)(()=>(f({canDirectLinkBeUsed:ve}),e.onFirstRender&&e.onFirstRender(),()=>{Le(!0)}),[]),R(h.Box,{display:"flex",alignItems:"center",justifyContent:"center",backgroundRepeat:"no-repeat",css:pe.css`
        label {
          position: absolute;
          cursor: default;
          z-index: 1001;
          width: 100%;
          height: 100%;
        }
      `,backgroundColor:e.mode!=="constructor"||l?"transparent":"lightGray",width:"100%",height:"100%",backgroundPosition:"center",className:"shots-cover",children:[!l&&e.mode==="constructor"&&!y&&i(h.Box,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",children:i(ae,{})}),e.mode==="constructor"&&l&&i(h.Box,{display:"flex",position:"absolute",zIndex:1e3,backgroundImage:`url(${de})`,backgroundRepeat:"repeat",width:"100%",height:"100%",opacity:.4}),e.mode==="constructor"&&i(ge.default,{id:`rm-shots-widget-file-upload-${m}`,onClick:r=>{r.preventDefault()},readFileData:!1,onChangeMultiple:r=>{f({files:r,isUploading:!0})},position:"absolute",zIndex:1001,dropFile:!y,accept:"image/png, image/jpeg, video/*, .mkv",multiple:!0}),y&&i(h.Box,{display:"flex",position:"absolute",top:"50%",left:"50%",cursor:"default",transform:"translate(-50%, -50%)",children:i(fe.default,{bgColor:"gray",size:"big"})}),i("canvas",{id:m,width:e.mode==="constructor"||V>1?S:Math.min(S,Math.floor(n*me)),height:e.mode==="constructor"||V>1?C:Math.min(C,Math.floor(u*me)),ref:j,style:{objectFit:"cover",userSelect:"none",width:"100%",height:"100%",zIndex:1e3,...Y||!w?{opacity:1,visibility:e.mode==="constructor"?"inherit":"visible"}:{opacity:0,visibility:e.mode==="constructor"?"inherit":"hidden"}},children:"Your browser does not support Canvas element"})," ",w&&!Y&&i(h.Box,{position:"absolute",left:"0",right:"0",bottom:"0",top:"0",zIndex:1001,backgroundImage:`url(${Ee})`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",filter:"blur(5px)"})]})}var o,h,fe,ge,pe,me,je,ue,qe,Je,Qe,X=k(()=>{"use strict";o=s(De()),h=s(Z()),fe=s(Ve()),ge=s(Oe());ne();He();Ze();We();_e();ze();Xe();Ae();Te();ce();pe=s(A());p();me=window.devicePixelRatio||1,je={top:1,center:.5,bottom:0},ue=10,qe=({currentScrollOffset:e,pageContentTop:m,pageScale:n,magContainerHeight:u,widgetBoxTop:l,scrollStartPoint:b,startPointOffset:U,scrollSpeed:S,scrollDelay:C,isFixed:E})=>{let M=m/n,z=u/n,v=e/n;if(E)return Math.round((v-C)*S/ue);let I=l+M,B=I-z,D=je[b],P=D*(I-B)+B+U;return Math.round((v-P)*S/ue)},Je=[{},()=>{}];Qe=Ke});var et=k(()=>{X();X()});et();export{Qe as Shots};
